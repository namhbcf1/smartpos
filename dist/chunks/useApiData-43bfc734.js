import{r as t}from"./react-vendor-546521e5.js";import{a}from"../assets/index-e3f8a988.js";const e=(e,n={})=>{const[r,i]=t.useState([]),[l,s]=t.useState(null),[u,o]=t.useState(!0),[c,g]=t.useState(null),[h,S]=t.useState(1),[d,y]=t.useState(10),f=Object.fromEntries(Object.entries(n).filter(([t,a])=>void 0!==a));t.useEffect(()=>{(async()=>{try{o(!0),g(null);const t={...f,page:h.toString(),limit:d.toString()},n=new URLSearchParams(t).toString(),r=n?`${e}?${n}`:e,l=await a.get(r);i(l.data||[]),s(l.pagination)}catch(t){g("Không thể tải dữ liệu")}finally{o(!1)}})()},[e,JSON.stringify(f),h,d]);return{data:r,pagination:l,isLoading:u,error:c,refetch:()=>{(async()=>{try{o(!0),g(null);const t={...f,page:h.toString(),limit:d.toString()},n=new URLSearchParams(t).toString(),r=n?`${e}?${n}`:e,l=await a.get(r);i(l.data||[]),s(l.pagination)}catch(t){g("Không thể tải dữ liệu")}finally{o(!1)}})()},handlePageChange:t=>{S(t)},handleLimitChange:t=>{y(t),S(1)},page:h,limit:d}},n=()=>{const[e,n]=t.useState(!1),[r,i]=t.useState(null);return{deleteItem:async t=>{try{return n(!0),i(null),await a.delete(t),!0}catch(e){return i("Không thể xóa dữ liệu"),!1}finally{n(!1)}},loading:e,error:r}},r=()=>{const[e,n]=t.useState(!1),[r,i]=t.useState(null);return{create:async(t,e)=>{try{n(!0),i(null);return await a.post(t,e)}catch(r){return i("Không thể tạo dữ liệu"),null}finally{n(!1)}},loading:e,error:r}},i=()=>{const[e,n]=t.useState(!1),[r,i]=t.useState(null);return{update:async(t,e)=>{try{n(!0),i(null);return await a.put(t,e)}catch(r){return i("Không thể cập nhật dữ liệu"),null}finally{n(!1)}},loading:e,error:r}};export{n as a,i as b,r as c,e as u};
