import{j as e,G as s,x as r,B as t,e as a,i as o,y as n,z as i,h as l,l as d,C as m}from"../chunks/mui-core-c8a509c2.js";import{u as c,r as u,b as h}from"../chunks/react-vendor-546521e5.js";import{u as x,C as p,c as g}from"../chunks/ui-vendor-6aa703b7.js";import{u as b}from"../assets/index-e3f8a988.js";import{n as j,V as f,o as y}from"../chunks/mui-icons-38bddb39.js";import"../chunks/query-vendor-a9f5ea8b.js";import"../chunks/utils-vendor-11713830.js";const w=()=>{const w=c(),{login:S,isAuthenticated:v}=b(),[k,q]=u.useState(!1),[z,P]=u.useState(!1);h.useEffect(()=>{v&&w("/dashboard",{replace:!0})},[v,w]);const{control:C,handleSubmit:I,formState:{errors:W}}=x({defaultValues:{email:"",password:""}});return e.jsxs(s,{container:!0,component:"main",sx:{height:"100vh"},children:[e.jsx(s,{item:!0,xs:!1,sm:4,md:7,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.3)",zIndex:1},"&::after":{content:'"SmartPOS"',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"3rem",fontWeight:"bold",zIndex:2,textShadow:"2px 2px 4px rgba(0,0,0,0.5)"}}}),e.jsx(s,{item:!0,xs:12,sm:8,md:5,component:r,elevation:6,square:!0,children:e.jsxs(t,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(a,{sx:{m:1,bgcolor:"primary.main",width:56,height:56},children:e.jsx(j,{fontSize:"large"})}),e.jsx(o,{component:"h1",variant:"h5",sx:{mt:2},children:"SmartPOS Login"}),e.jsx(o,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:3},children:"Enter your credentials to access the system"}),e.jsxs(t,{component:"form",noValidate:!0,onSubmit:I(async e=>{P(!0);try{await S(e.email,e.password),g.success("Đăng nhập thành công"),setTimeout(()=>{w("/dashboard",{replace:!0})},200)}catch(s){const e=s?.response?.data?.message||s?.message||"Đăng nhập thất bại. Vui lòng thử lại.";g.error(e)}finally{P(!1)}}),sx:{mt:1,width:"100%",maxWidth:"400px"},children:[e.jsx(p,{name:"email",control:C,rules:{required:"Email is required"},render:({field:s})=>e.jsx(n,{...s,margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email",autoFocus:!0,error:!!W.email,helperText:W.email?.message,disabled:z})}),e.jsx(p,{name:"password",control:C,rules:{required:"Password is required"},render:({field:s})=>e.jsx(n,{...s,margin:"normal",required:!0,fullWidth:!0,label:"Password",type:k?"text":"password",id:"password",autoComplete:"current-password",error:!!W.password,helperText:W.password?.message,disabled:z,InputProps:{endAdornment:e.jsx(i,{position:"end",children:e.jsx(l,{"aria-label":"toggle password visibility",onClick:()=>q(!k),edge:"end",children:k?e.jsx(f,{}):e.jsx(y,{})})})}})}),e.jsx(d,{type:"submit",fullWidth:!0,variant:"contained",disabled:z,sx:{mt:3,mb:2,py:1.5},children:z?e.jsx(m,{size:24,color:"inherit"}):"Sign In"}),e.jsx(t,{sx:{mt:5},children:e.jsx(o,{variant:"body2",color:"text.secondary",align:"center",children:"Default login: admin / admin"})})]})]})})]})};export{w as default};
