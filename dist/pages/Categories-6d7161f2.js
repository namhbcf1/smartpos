import{k as r,s as e,K as a,f as n,B as i,j as t,l as s,C as o,E as c,Z as l,y as d,G as h,i as x,F as g,N as m,S as p,z as u,W as b,X as j,Y as f,n as y,m as v,_ as k,$ as C,a0 as S,a1 as w,a2 as z,H as $,O as W,a4 as T,a5 as _,a6 as M,a7 as R,a8 as B,a9 as I,ab as P,ac as Y}from"../chunks/mui-core-c8a509c2.js";import{r as F,b as N}from"../chunks/react-vendor-546521e5.js";import{u as H,a as K,c as A,b as L}from"../chunks/useApiData-43bfc734.js";import{c as D,s as X,g as E}from"../assets/index-e3f8a988.js";import{a as q}from"../chunks/ui-vendor-6aa703b7.js";import{d as O,w as G,y as Q,z as V,I as Z,S as J,p as U,F as rr,E as er,G as ar}from"../chunks/mui-icons-38bddb39.js";import"../chunks/query-vendor-a9f5ea8b.js";import"../chunks/utils-vendor-11713830.js";const nr=r`
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
`,ir=r`
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
`,tr=r`
  0%, 100% {
    box-shadow: 0 0 20px rgba(14, 165, 233, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(14, 165, 233, 0.6);
  }
`,sr=e(a)(({theme:r})=>({borderRadius:24,background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",border:`1px solid ${D.gray[200]}`,boxShadow:X.soft,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(\n      90deg,\n      transparent,\n      ${n(D.primary[500],.1)},\n      transparent\n    )`,transition:"left 0.6s"},"&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:X.large,borderColor:D.primary[300],"&::before":{left:"100%"}},"&.featured":{background:"linear-gradient(135deg,\n      rgba(255, 255, 255, 0.9) 0%,\n      rgba(14, 165, 233, 0.05) 100%\n    )",borderColor:D.primary[300],animation:`${tr} 3s ease-in-out infinite`},"&.loading":{background:"\n      linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)\n    ",backgroundSize:"200px 100%",animation:`${nr} 1.5s infinite`}})),or=e(i)(({theme:r})=>({position:"absolute",top:0,left:0,right:0,height:"4px",background:E.primary,borderRadius:"24px 24px 0 0"})),cr=e(i)(({theme:r})=>({position:"absolute",top:16,right:16,width:48,height:48,borderRadius:"50%",background:E.primary,display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:X.colored.primary,animation:`${ir} 3s ease-in-out infinite`,"& svg":{fontSize:"1.5rem"}}));r`
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
`,r`
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
`;const lr=r`
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
`,dr=e(s)(({theme:r})=>({borderRadius:16,padding:"14px 28px",fontSize:"0.875rem",fontWeight:600,textTransform:"none",position:"relative",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",transition:"left 0.5s"},"&:hover::before":{left:"100%"},"&.MuiButton-containedPrimary":{background:E.primary,boxShadow:X.colored.primary,"&:hover":{transform:"translateY(-3px)",boxShadow:`${X.colored.primary}, 0 20px 25px -5px rgba(14, 165, 233, 0.3)`},"&:active":{transform:"translateY(-1px)"}},"&.MuiButton-containedSecondary":{background:E.secondary,boxShadow:X.colored.secondary,"&:hover":{transform:"translateY(-3px)",boxShadow:`${X.colored.secondary}, 0 20px 25px -5px rgba(168, 85, 247, 0.3)`}},"&.MuiButton-containedSuccess":{background:E.success,boxShadow:"0 10px 15px -3px rgba(34, 197, 94, 0.3), 0 4px 6px -2px rgba(34, 197, 94, 0.1)","&:hover":{transform:"translateY(-3px)",boxShadow:"0 20px 25px -5px rgba(34, 197, 94, 0.4), 0 10px 10px -5px rgba(34, 197, 94, 0.2)"}},"&.MuiButton-containedError":{background:"linear-gradient(135deg, #f59e0b 0%, #ef4444 100%)",boxShadow:"0 10px 15px -3px rgba(239, 68, 68, 0.3), 0 4px 6px -2px rgba(239, 68, 68, 0.1)","&:hover":{transform:"translateY(-3px)",boxShadow:"0 20px 25px -5px rgba(239, 68, 68, 0.4), 0 10px 10px -5px rgba(239, 68, 68, 0.2)"}},"&.MuiButton-outlined":{borderWidth:2,borderColor:D.gray[300],color:D.gray[700],background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)","&:hover":{borderColor:D.primary[500],backgroundColor:D.primary[50],transform:"translateY(-2px)",boxShadow:X.soft}},"&.MuiButton-text":{color:D.gray[600],"&:hover":{backgroundColor:D.gray[100],color:D.primary[600],transform:"translateY(-1px)"}},"&.loading":{pointerEvents:"none",animation:`${lr} 1.5s ease-in-out infinite`},"&.Mui-disabled":{background:D.gray[200],color:D.gray[400],transform:"none",boxShadow:"none"},"&.MuiButton-sizeSmall":{padding:"8px 16px",fontSize:"0.75rem",borderRadius:12},"&.MuiButton-sizeLarge":{padding:"18px 36px",fontSize:"1rem",borderRadius:20}})),hr=({children:r,loading:e=!1,gradient:a=!0,glow:n=!1,disabled:s,startIcon:c,endIcon:l,...d})=>t.jsx(dr,{...d,disabled:s||e,className:`${e?"loading":""} ${d.className||""}`,startIcon:e?void 0:c,endIcon:e?void 0:l,children:e?t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(o,{size:16,sx:{color:"inherit",opacity:.8}}),t.jsx("span",{children:"Đang xử lý..."})]}):r}),xr=r`
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`;r`
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
`;const gr=e(c)(({theme:r})=>({padding:r.spacing(2,3),maxWidth:"xl",minHeight:"100vh",backgroundColor:r.palette.grey[50]})),mr=e(i)(({theme:r})=>({marginBottom:r.spacing(4),animation:`${xr} 0.6s ease-out`})),pr=e(({children:r,featured:e=!1,loading:a=!1,icon:n,gradient:i=!0,onClick:s,className:o,...c})=>t.jsxs(sr,{className:`\n        ${e?"featured":""} \n        ${a?"loading":""} \n        ${o||""}\n      `.trim(),onClick:s,sx:{cursor:s?"pointer":"default"},...c,children:[i&&t.jsx(or,{}),n&&t.jsx(cr,{children:n}),r]}))(({theme:r})=>({height:"100%",background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",border:`1px solid ${D.gray[700]}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:X.large},"&.primary":{borderColor:D.primary[400],background:"linear-gradient(135deg,\n      rgba(30, 41, 59, 0.95) 0%,\n      rgba(14, 165, 233, 0.1) 100%\n    )"},"&.success":{borderColor:D.success[400],background:"linear-gradient(135deg,\n      rgba(30, 41, 59, 0.95) 0%,\n      rgba(34, 197, 94, 0.1) 100%\n    )"}})),ur=e(i)(({theme:r})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:r.spacing(3),padding:r.spacing(2),background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",borderRadius:16,border:`1px solid ${D.gray[700]}`,animation:`${xr} 0.8s ease-out`})),br=e(l)(({theme:r})=>({borderRadius:20,background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",border:`1px solid ${D.gray[700]}`,boxShadow:X.soft,overflow:"hidden",animation:`${xr} 1s ease-out`})),jr=e(d)(({theme:r})=>({"& .MuiOutlinedInput-root":{borderRadius:12,backgroundColor:"rgba(51, 65, 85, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(51, 65, 85, 0.9)"},"&.Mui-focused":{backgroundColor:"rgba(51, 65, 85, 0.95)",transform:"translateY(-2px)",boxShadow:X.colored.primary}}})),fr=()=>{const{enqueueSnackbar:r}=q(),[e,a]=F.useState(""),[n,s]=F.useState(""),[o,c]=F.useState(""),[l,X]=F.useState(!1),[nr,ir]=F.useState(!1),[tr,sr]=F.useState(null),[or,cr]=F.useState(null),[lr,dr]=F.useState({name:"",description:"",is_active:!0});N.useEffect(()=>{const r=setTimeout(()=>{s(e)},500);return()=>clearTimeout(r)},[e]);const xr=F.useMemo(()=>({search:n,is_active:""===o?void 0:o,sortBy:"name",sortDirection:"asc"}),[n,o]),{data:fr,pagination:yr,isLoading:vr,refetch:kr,handlePageChange:Cr,handleLimitChange:Sr,page:wr,limit:zr}=H("/categories",xr),{data:$r,isLoading:Wr}=H("/categories",{limit:1e3,page:1,sortBy:"name",sortDirection:"asc"}),Tr=K(),_r=A(),Mr=L(),Rr=()=>{dr({name:"",description:"",is_active:!0}),cr(null)};return t.jsxs(gr,{maxWidth:"xl",children:[t.jsxs(i,{sx:{py:{xs:1,sm:2}},children:[t.jsx(mr,{children:t.jsxs(h,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{mb:4},children:[t.jsxs(h,{item:!0,children:[t.jsxs(x,{variant:"h3",sx:{fontWeight:800,background:E.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:2},children:[t.jsx(O,{sx:{fontSize:"2.5rem",color:D.primary[500]}}),"Quản lý danh mục"]}),t.jsx(x,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Tổ chức và quản lý danh mục sản phẩm một cách hiệu quả"})]}),t.jsx(h,{item:!0,children:t.jsx(hr,{variant:"contained",color:"primary",size:"large",startIcon:t.jsx(G,{}),onClick:()=>{cr(null),Rr(),ir(!0)},sx:{background:E.primary,borderRadius:"16px",padding:"12px 24px"},children:"Thêm danh mục"})})]})}),t.jsx(g,{in:!0,timeout:800,children:t.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(pr,{className:"primary",icon:t.jsx(O,{}),children:t.jsxs(m,{sx:{textAlign:"center",py:3},children:[t.jsx(x,{variant:"h3",sx:{fontWeight:800,color:D.primary[600]},children:Wr?t.jsx(p,{width:60,height:40}):$r?.length||0}),t.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Tổng danh mục"})]})})}),t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(pr,{className:"success",icon:t.jsx(Q,{}),children:t.jsxs(m,{sx:{textAlign:"center",py:3},children:[t.jsx(x,{variant:"h3",sx:{fontWeight:800,color:D.success[600]},children:Wr?t.jsx(p,{width:60,height:40}):$r?.filter(r=>r.is_active).length||0}),t.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Đang hoạt động"})]})})}),t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(pr,{icon:t.jsx(V,{}),children:t.jsxs(m,{sx:{textAlign:"center",py:3},children:[t.jsx(x,{variant:"h3",sx:{fontWeight:800,color:D.error[600]},children:Wr?t.jsx(p,{width:60,height:40}):$r?.filter(r=>!r.is_active).length||0}),t.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Không hoạt động"})]})})}),t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(pr,{icon:t.jsx(Z,{}),children:t.jsxs(m,{sx:{textAlign:"center",py:3},children:[t.jsx(x,{variant:"h3",sx:{fontWeight:800,color:D.secondary[600]},children:Wr?t.jsx(p,{width:60,height:40}):$r?.reduce((r,e)=>r+(e.product_count||0),0)||0}),t.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Sản phẩm"})]})})})]})}),t.jsxs(ur,{children:[t.jsxs(i,{sx:{display:"flex",gap:2,alignItems:"center",flex:1},children:[t.jsx(jr,{label:"Tìm kiếm danh mục",variant:"outlined",size:"medium",value:e,onChange:r=>a(r.target.value),sx:{minWidth:300},InputProps:{startAdornment:t.jsx(u,{position:"start",children:t.jsx(J,{sx:{color:D.gray[500]}})})}}),t.jsxs(b,{size:"medium",sx:{minWidth:200},children:[t.jsx(j,{children:"Trạng thái"}),t.jsxs(f,{value:o,onChange:r=>c(r.target.value),label:"Trạng thái",sx:{borderRadius:3,backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)"},children:[t.jsx(y,{value:"",children:"Tất cả"}),t.jsx(y,{value:"true",children:"Hoạt động"}),t.jsx(y,{value:"false",children:"Không hoạt động"})]})]})]}),t.jsxs(i,{sx:{display:"flex",gap:1},children:[t.jsx(v,{title:"Làm mới",children:t.jsx(hr,{variant:"outlined",size:"medium",onClick:()=>kr(),sx:{minWidth:"auto",px:2},children:t.jsx(U,{})})}),t.jsx(v,{title:"Xóa bộ lọc",children:t.jsx(hr,{variant:"outlined",size:"medium",onClick:()=>{a(""),s(""),c("")},sx:{minWidth:"auto",px:2},children:t.jsx(rr,{})})})]})]}),t.jsxs(br,{children:[t.jsxs(k,{children:[t.jsx(C,{children:t.jsxs(S,{children:[t.jsx(w,{children:"Tên danh mục"}),t.jsx(w,{children:"Mô tả"}),t.jsx(w,{align:"center",children:"Số sản phẩm"}),t.jsx(w,{align:"center",children:"Trạng thái"}),t.jsx(w,{align:"center",children:"Ngày tạo"}),t.jsx(w,{align:"center",children:"Thao tác"})]})}),t.jsx(z,{children:vr?Array.from(Array(zr)).map((r,e)=>t.jsxs(S,{children:[t.jsx(w,{children:t.jsx(p,{variant:"text"})}),t.jsx(w,{children:t.jsx(p,{variant:"text"})}),t.jsx(w,{children:t.jsx(p,{variant:"text"})}),t.jsx(w,{children:t.jsx(p,{variant:"circular",width:80,height:24})}),t.jsx(w,{children:t.jsx(p,{variant:"text"})}),t.jsx(w,{children:t.jsx(p,{variant:"rectangular",width:80,height:32})})]},e)):0===fr.length?t.jsx(S,{children:t.jsx(w,{colSpan:6,align:"center",children:t.jsx($,{severity:"info",sx:{m:2},children:e||""!==o?"Không tìm thấy danh mục nào phù hợp với bộ lọc":"Chưa có danh mục nào. Hãy tạo danh mục đầu tiên!"})})}):fr.map(r=>t.jsxs(S,{hover:!0,children:[t.jsx(w,{children:t.jsx(x,{variant:"body1",fontWeight:"medium",children:r.name})}),t.jsx(w,{children:t.jsx(x,{variant:"body2",color:"text.secondary",children:r.description||"Không có mô tả"})}),t.jsx(w,{align:"center",children:t.jsx(W,{icon:t.jsx(Z,{fontSize:"small"}),label:r.product_count||0,size:"small",sx:{backgroundColor:D.primary[100],color:D.primary[800],fontWeight:600,borderRadius:"20px"}})}),t.jsx(w,{align:"center",children:t.jsx(W,{size:"small",icon:r.is_active?t.jsx(Q,{fontSize:"small"}):t.jsx(V,{fontSize:"small"}),label:r.is_active?"Hoạt động":"Không hoạt động",className:r.is_active?"active":"inactive",sx:{backgroundColor:r.is_active?D.success[100]:D.error[100],color:r.is_active?D.success[800]:D.error[800],border:`1px solid ${r.is_active?D.success[300]:D.error[300]}`,fontWeight:600,borderRadius:"20px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"scale(1.05)"}}})}),t.jsx(w,{align:"center",children:t.jsx(x,{variant:"body2",children:new Date(r.created_at).toLocaleDateString("vi-VN")})}),t.jsx(w,{align:"center",children:t.jsxs(i,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[t.jsx(v,{title:"Sửa",children:t.jsx(hr,{variant:"outlined",size:"small",onClick:()=>(r=>{cr(r),dr({name:r.name,description:r.description||"",is_active:r.is_active}),ir(!0)})(r),sx:{minWidth:"auto",px:1.5,borderColor:D.primary[300],color:D.primary[600],"&:hover":{borderColor:D.primary[500],backgroundColor:D.primary[50]}},children:t.jsx(er,{fontSize:"small"})})}),t.jsx(v,{title:"Xóa",children:t.jsx(hr,{variant:"outlined",size:"small",onClick:()=>{return e=r.id,sr(e),void X(!0);var e},disabled:Boolean(r.product_count&&r.product_count>0),sx:{minWidth:"auto",px:1.5,borderColor:D.error[300],color:D.error[600],"&:hover":{borderColor:D.error[500],backgroundColor:D.error[50]},"&.Mui-disabled":{borderColor:D.gray[200],color:D.gray[400]}},children:t.jsx(ar,{fontSize:"small"})})})]})})]},r.id))})]}),yr&&t.jsx(i,{sx:{p:2,borderTop:`1px solid ${D.gray[200]}`,background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)"},children:t.jsx(T,{component:"div",count:yr.total,page:wr-1,rowsPerPage:zr,onPageChange:(r,e)=>Cr(e+1),onRowsPerPageChange:r=>Sr(parseInt(r.target.value,10)),labelRowsPerPage:"Hiển thị:",labelDisplayedRows:({from:r,to:e,count:a})=>`${r}-${e} của ${a}`,rowsPerPageOptions:[10,25,50,100],sx:{"& .MuiTablePagination-toolbar":{paddingLeft:0,paddingRight:0},"& .MuiTablePagination-selectLabel, & .MuiTablePagination-displayedRows":{fontWeight:500,color:D.gray[600]},"& .MuiIconButton-root":{borderRadius:"8px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:D.primary[50],transform:"scale(1.1)"}}}})})]})]}),t.jsxs(_,{open:l,onClose:()=>X(!1),children:[t.jsx(M,{children:"Xác nhận xóa"}),t.jsx(R,{children:t.jsx(B,{children:"Bạn có chắc chắn muốn xóa danh mục này không? Hành động này không thể hoàn tác."})}),t.jsxs(I,{children:[t.jsx(hr,{variant:"outlined",onClick:()=>X(!1),children:"Hủy"}),t.jsx(hr,{variant:"contained",color:"error",onClick:async()=>{if(tr){await Tr.deleteItem(`/categories/${tr}`)?(kr(),X(!1),r("Xóa danh mục thành công",{variant:"success"})):r("Không thể xóa danh mục",{variant:"error"})}},loading:Tr.loading,children:"Xóa"})]})]}),t.jsxs(_,{open:nr,onClose:()=>ir(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(M,{children:or?"Sửa danh mục":"Thêm danh mục mới"}),t.jsx(R,{children:t.jsxs(h,{container:!0,spacing:2,sx:{mt:1},children:[t.jsx(h,{item:!0,xs:12,children:t.jsx(d,{label:"Tên danh mục *",value:lr.name,onChange:r=>dr({...lr,name:r.target.value}),fullWidth:!0,error:!lr.name.trim(),helperText:lr.name.trim()?"":"Tên danh mục không được để trống"})}),t.jsx(h,{item:!0,xs:12,children:t.jsx(d,{label:"Mô tả",value:lr.description,onChange:r=>dr({...lr,description:r.target.value}),fullWidth:!0,multiline:!0,rows:3,placeholder:"Nhập mô tả cho danh mục..."})}),t.jsx(h,{item:!0,xs:12,children:t.jsx(P,{control:t.jsx(Y,{checked:lr.is_active,onChange:r=>dr({...lr,is_active:r.target.checked})}),label:"Kích hoạt danh mục"})})]})}),t.jsxs(I,{children:[t.jsx(hr,{variant:"outlined",onClick:()=>ir(!1),children:"Hủy"}),t.jsx(hr,{onClick:async()=>{if(!lr.name.trim())return void r("Tên danh mục không được để trống",{variant:"error"});const e={name:lr.name.trim(),description:lr.description.trim()||null,is_active:lr.is_active};let a=null;or?(a=await Mr.update(`/categories/${or.id}`,e),a?r("Cập nhật danh mục thành công",{variant:"success"}):r("Không thể cập nhật danh mục",{variant:"error"})):(a=await _r.create("/categories",e),a?r("Tạo danh mục thành công",{variant:"success"}):r("Không thể tạo danh mục",{variant:"error"})),a&&(kr(),ir(!1),Rr())},variant:"contained",color:"primary",loading:_r.loading||Mr.loading,disabled:!lr.name.trim(),children:or?"Cập nhật":"Tạo mới"})]})]})]})};export{fr as default};
