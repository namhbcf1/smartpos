import{j as e,b as r,k as t,s as a,A as n,D as o,B as s,I as i,d as l,e as c,L as p,f as d,u as h,g as x,T as g,h as u,i as m,l as f,m as j,M as b,n as y,o as _,p as k,q as v,r as w,t as S,F as E,C,v as z,w as I}from"../chunks/mui-core-c8a509c2.js";import{d as P,r as R,u as O,f as T,O as L,N as A,h as D,i as W,b as V,B as M}from"../chunks/react-vendor-546521e5.js";import{Q as F,a as N}from"../chunks/query-vendor-a9f5ea8b.js";import{O as B}from"../chunks/ui-vendor-6aa703b7.js";import{a as $}from"../chunks/utils-vendor-11713830.js";import{M as H,S as q,a as U,N as Y,A as Q,b as X,L as K,C as G,c as J,D as Z,I as ee,d as re,B as te,e as ae,R as ne,H as oe,f as se,P as ie,g as le,h as ce,i as pe,j as de,k as he,l as xe,m as ge}from"../chunks/mui-icons-38bddb39.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();var ue={},me=P;ue.createRoot=me.createRoot,ue.hydrateRoot=me.hydrateRoot;const fe={},je=function(e,r,t){if(!r||0===r.length)return e();const a=document.getElementsByTagName("link");return Promise.all(r.map(e=>{if((e=function(e){return"/"+e}(e))in fe)return;fe[e]=!0;const r=e.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(!!t)for(let t=a.length-1;t>=0;t--){const n=a[t];if(n.href===e&&(!r||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=r?"stylesheet":"modulepreload",r||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),r?new Promise((r,t)=>{o.addEventListener("load",r),o.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=e,window.dispatchEvent(r),!r.defaultPrevented)throw e})},be=Date.now(),ye=$.create({baseURL:"https://smartpos-api.bangachieu2.workers.dev/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0,timeout:1e4});ye.interceptors.request.use(e=>(e.headers["X-Client-Version"]="1.0.0",e.params?e.params._t=be:e.params={_t:be},e),e=>Promise.reject(e)),ye.interceptors.response.use(e=>e,async e=>{const r=e.config;if(401===e.response?.status&&!r._retry){if(r._retry=!0,r.url?.includes("/auth/refresh-token"))return window.location.href="/login",Promise.reject(e);try{return await ye.post("/auth/refresh-token"),ye(r)}catch(t){return window.location.href="/login",Promise.reject(t)}}return Promise.reject(e)});const _e={get:async(e,r)=>{const t=await ye.get(e,r);if(!t.data.success)throw new Error(t.data.message||"Request failed");return t.data.data},post:async(e,r,t)=>{const a=await ye.post(e,r,t);if(!a.data.success)throw new Error(a.data.message||"Request failed");return a.data.data},put:async(e,r,t)=>(await ye.put(e,r,t)).data.data,patch:async(e,r,t)=>(await ye.patch(e,r,t)).data.data,delete:async(e,r)=>(await ye.delete(e,r)).data.data},ke=R.createContext({user:null,isAuthenticated:!1,isLoading:!0,login:async()=>{},logout:async()=>{},checkAuth:async()=>!1,checkAuthSilent:async()=>!1}),ve=({children:r})=>{const t=()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},[a,n]=R.useState(t()),[o,s]=R.useState(!!t()),[i,l]=R.useState(!0);R.useEffect(()=>{(async()=>{if(localStorage.getItem("user")){await c()||(localStorage.removeItem("user"),n(null),s(!1))}else n(null),s(!1);l(!1)})()},[]);const c=async()=>{try{const e=await _e.get("/auth/me");return!!e&&(n(e),s(!0),localStorage.setItem("user",JSON.stringify(e)),!0)}catch(e){return n(null),s(!1),localStorage.removeItem("user"),!1}},p={user:a,isAuthenticated:o,isLoading:i,login:async(e,r)=>{try{l(!0);const t=await _e.post("/auth/login",{email:e,password:r});if(!t)throw new Error("Login failed - no user data received");n(t),s(!0),localStorage.setItem("user",JSON.stringify(t)),await new Promise(e=>setTimeout(e,100))}catch(t){throw n(null),s(!1),localStorage.removeItem("user"),t}finally{l(!1)}},logout:async()=>{try{l(!0),await _e.post("/auth/logout"),n(null),s(!1),localStorage.removeItem("user")}catch(e){}finally{l(!1)}},checkAuth:async()=>{try{const e=await _e.get("/auth/me");return!!e&&(n(e),s(!0),localStorage.setItem("user",JSON.stringify(e)),!0)}catch(e){return n(null),s(!1),localStorage.removeItem("user"),!1}},checkAuthSilent:c};return e.jsx(ke.Provider,{value:p,children:r})},we=()=>{const e=R.useContext(ke);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Se=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Ee={primary:{50:"#f0f9ff",100:"#e0f2fe",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",800:"#075985"},secondary:{100:"#f3e8ff",400:"#c084fc",500:"#a855f7",600:"#9333ea"},success:{100:"#dcfce7",400:"#4ade80",500:"#22c55e",600:"#16a34a"},error:{100:"#fee2e2",400:"#f87171",500:"#ef4444",600:"#dc2626"},warning:{100:"#fef3c7",400:"#fbbf24",500:"#f59e0b",600:"#d97706"},info:{100:"#cffafe",400:"#22d3ee",500:"#06b6d4",600:"#0891b2"},gray:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"}},Ce={primary:"linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)",secondary:"linear-gradient(135deg, #a855f7 0%, #ec4899 100%)",success:"linear-gradient(135deg, #22c55e 0%, #10b981 100%)"},ze={soft:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",medium:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",large:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",colored:{primary:"0 10px 15px -3px rgba(14, 165, 233, 0.3), 0 4px 6px -2px rgba(14, 165, 233, 0.1)",secondary:"0 10px 15px -3px rgba(168, 85, 247, 0.3), 0 4px 6px -2px rgba(168, 85, 247, 0.1)"}},Ie={fontFamily:["Roboto","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"sans-serif"].join(",")},Pe=12,Re=20,Oe={MuiButton:{styleOverrides:{root:{borderRadius:Pe,padding:"12px 24px",fontSize:"0.875rem",fontWeight:600,textTransform:"none",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},containedPrimary:{background:Ce.primary,boxShadow:ze.colored.primary,"&:hover":{transform:"translateY(-2px)",boxShadow:`${ze.colored.primary}, 0 20px 25px -5px rgba(14, 165, 233, 0.2)`}}}},MuiCard:{styleOverrides:{root:{borderRadius:Re,background:"rgba(30, 41, 59, 0.95)",backgroundImage:"none",backdropFilter:"blur(20px)",border:`1px solid ${Ee.gray[700]}`,boxShadow:ze.soft,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:ze.large,borderColor:Ee.gray[600]}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:Pe,backgroundColor:"rgba(51, 65, 85, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",color:"#f8fafc","&:hover":{backgroundColor:"rgba(51, 65, 85, 0.9)","& .MuiOutlinedInput-notchedOutline":{borderColor:Ee.primary[400]}},"&.Mui-focused":{backgroundColor:"rgba(51, 65, 85, 1)",transform:"translateY(-2px)",boxShadow:ze.colored.primary,"& .MuiOutlinedInput-notchedOutline":{borderColor:Ee.primary[400],borderWidth:2}}},"& .MuiInputLabel-root":{color:"#cbd5e1",fontWeight:500,"&.Mui-focused":{color:Ee.primary[400]}}}}},MuiTableCell:{styleOverrides:{root:{padding:"16px 20px",borderBottom:`1px solid ${Ee.gray[700]}`,color:"#f8fafc"},head:{fontWeight:700,fontSize:"0.875rem",color:"#cbd5e1",backgroundColor:"rgba(51, 65, 85, 0.8)",textTransform:"uppercase",letterSpacing:"0.05em"}}},MuiTableRow:{styleOverrides:{root:{transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(51, 65, 85, 0.5)",transform:"scale(1.01)"}}}},MuiChip:{styleOverrides:{root:{borderRadius:20,fontWeight:600,fontSize:"0.75rem"},colorPrimary:{backgroundColor:Ee.primary[100],color:Ee.primary[800]},colorSuccess:{backgroundColor:Ee.success[100],color:Ee.success[600]},colorError:{backgroundColor:Ee.error[100],color:Ee.error[600]}}},MuiDialog:{styleOverrides:{paper:{borderRadius:24,background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",border:`1px solid ${Ee.gray[700]}`,boxShadow:ze.large}}}},Te=r({palette:{mode:"dark",primary:{main:Ee.primary[400],light:Ee.primary[300],dark:Ee.primary[600]},secondary:{main:Ee.secondary[400],light:Ee.secondary[300],dark:Ee.secondary[600]},success:{main:Ee.success[400],light:Ee.success[300],dark:Ee.success[600]},error:{main:Ee.error[400],light:Ee.error[300],dark:Ee.error[600]},warning:{main:Ee.warning[400],light:Ee.warning[300],dark:Ee.warning[600]},info:{main:Ee.info[400],light:Ee.info[300],dark:Ee.info[600]},background:{default:Ee.gray[900],paper:Ee.gray[800]},text:{primary:"#f8fafc",secondary:"#cbd5e1"}},typography:{fontFamily:Ie.fontFamily,h1:{fontSize:"3rem",fontWeight:800,lineHeight:1.2,letterSpacing:"-0.025em",background:Ce.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},h2:{fontSize:"2.25rem",fontWeight:700,lineHeight:1.3,letterSpacing:"-0.025em",color:Ee.gray[900]},h3:{fontSize:"1.875rem",fontWeight:600,lineHeight:1.4,letterSpacing:"-0.025em",color:Ee.gray[800]},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4,color:Ee.gray[800]},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.5,color:Ee.gray[700]},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.5,color:Ee.gray[700]},body1:{fontSize:"1rem",lineHeight:1.6,color:Ee.gray[700]},body2:{fontSize:"0.875rem",lineHeight:1.6,color:Ee.gray[600]},caption:{fontSize:"0.75rem",lineHeight:1.5,color:Ee.gray[500],fontWeight:500},button:{textTransform:"none",fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.025em"}},components:Oe,shape:{borderRadius:Pe},shadows:["none",ze.soft,ze.medium,ze.large,"0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)","0 25px 50px -12px rgba(0, 0, 0, 0.25)"]});t`
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
`,t`
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`;const Le=t`
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
`;t`
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
`;const Ae=a(n)(({theme:e})=>({background:"rgba(30, 41, 59, 0.9)",backdropFilter:"blur(20px)",borderBottom:`1px solid ${Ee.gray[700]}`,boxShadow:"none",color:"#f8fafc",zIndex:e.zIndex.drawer+1,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"})),De=a(o)(({theme:e})=>({"& .MuiDrawer-paper":{width:240,background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",borderRight:`1px solid ${Ee.gray[700]}`,boxShadow:"none",overflow:"hidden"}}));a(s)(({theme:e})=>({background:"rgba(30, 41, 59, 0.8)",backdropFilter:"blur(20px)",borderRadius:20,border:`1px solid ${Ee.gray[700]}`,boxShadow:ze.soft,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-2px)",boxShadow:ze.medium}}));const We=a(s)(({theme:e})=>({position:"relative",borderRadius:12,background:"rgba(51, 65, 85, 0.8)",backdropFilter:"blur(10px)",border:`1px solid ${Ee.gray[700]}`,"&:hover":{background:"rgba(51, 65, 85, 0.9)",borderColor:Ee.primary[400]},"&:focus-within":{background:"rgba(51, 65, 85, 1)",borderColor:Ee.primary[400],boxShadow:ze.colored.primary},marginLeft:e.spacing(2),marginRight:e.spacing(2),width:"100%",maxWidth:400,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"})),Ve=a("div")(({theme:e})=>({padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#cbd5e1"})),Me=a(i)(({theme:e})=>({color:"#f8fafc",width:"100%","& .MuiInputBase-input":{padding:e.spacing(1.5,1,1.5,0),paddingLeft:`calc(1em + ${e.spacing(4)})`,transition:e.transitions.create("width"),width:"100%",fontSize:"0.875rem",fontWeight:500,"&::placeholder":{color:"#94a3b8"}}})),Fe=a(l)(({theme:e})=>({"& .MuiBadge-badge":{background:"linear-gradient(135deg, #f59e0b 0%, #ef4444 100%)",color:"white",fontWeight:600,fontSize:"0.75rem",animation:`${Le} 2s infinite`}})),Ne=a(c)(({theme:e})=>({width:40,height:40,background:Ce.primary,fontWeight:600,fontSize:"1rem",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"scale(1.1)",boxShadow:ze.colored.primary}})),Be=a(p)(({theme:e})=>({borderRadius:12,margin:"4px 12px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:Ee.primary[50],transform:"translateX(4px)"},"&.active":{backgroundColor:Ee.primary[100],borderLeft:`4px solid ${Ee.primary[500]}`,"& .MuiListItemIcon-root":{color:Ee.primary[600]},"& .MuiListItemText-primary":{color:Ee.primary[700],fontWeight:600}}})),$e=a(s)(({theme:e})=>({flexGrow:1,padding:e.spacing(3),background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",minHeight:"100vh",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`\n      radial-gradient(circle at 20% 80%, ${d(Ee.primary[600],.2)} 0%, transparent 50%),\n      radial-gradient(circle at 80% 20%, ${d(Ee.secondary[600],.2)} 0%, transparent 50%),\n      radial-gradient(circle at 40% 40%, ${d(Ee.success[600],.1)} 0%, transparent 50%)\n    `,pointerEvents:"none"}})),He=()=>{const r=h(),t=O(),a=T(),{user:n,logout:o}=we(),i=x(r.breakpoints.down("md")),[l,c]=R.useState(!i),[p,C]=R.useState(!1),[z,I]=R.useState(null),[P,A]=R.useState(null),D=[{text:"Dashboard",icon:e.jsx(Z,{}),path:"/",exact:!0,group:"main"},{text:"Điểm bán hàng",icon:e.jsx(U,{}),path:"/sales/new",group:"main"},{text:"Tất cả sản phẩm",icon:e.jsx(ee,{}),path:"/products",group:"inventory"},{text:"Danh mục",icon:e.jsx(re,{}),path:"/categories",group:"inventory"},{text:"Nhập kho",icon:e.jsx(ee,{}),path:"/inventory/stock-in",group:"inventory"},{text:"Chuyển kho",icon:e.jsx(ee,{}),path:"/inventory/transfer",group:"inventory"},{text:"Kiểm kê",icon:e.jsx(ee,{}),path:"/inventory/check",group:"inventory"},{text:"Nhà cung cấp",icon:e.jsx(te,{}),path:"/suppliers",group:"inventory"},{text:"Lịch sử bán hàng",icon:e.jsx(ae,{}),path:"/sales",group:"sales"},{text:"Quản lý đơn hàng",icon:e.jsx(ne,{}),path:"/orders",group:"sales"},{text:"Trả hàng/Hoàn tiền",icon:e.jsx(oe,{}),path:"/returns",group:"sales"},{text:"Khuyến mãi & Giảm giá",icon:e.jsx(se,{}),path:"/promotions",group:"sales"},{text:"Khách hàng",icon:e.jsx(ie,{}),path:"/customers",group:"main"},{text:"Tổng quan",icon:e.jsx(le,{}),path:"/reports",group:"reports"},{text:"Doanh thu",icon:e.jsx(ce,{}),path:"/reports/revenue",group:"reports"},{text:"Sản phẩm bán chạy",icon:e.jsx(ce,{}),path:"/reports/top-products",group:"reports"},{text:"Tồn kho",icon:e.jsx(ce,{}),path:"/reports/inventory",group:"reports"},{text:"Lợi nhuận",icon:e.jsx(ce,{}),path:"/reports/profit",group:"reports"},{text:"Tài chính",icon:e.jsx(pe,{}),path:"/finance",group:"main"},{text:"Công nợ",icon:e.jsx(de,{}),path:"/accounts",group:"main"},{text:"Lịch & Lịch hẹn",icon:e.jsx(he,{}),path:"/calendar",group:"main"},{text:"Quản lý chi nhánh",icon:e.jsx(xe,{}),path:"/stores",group:"main"}],W=[{text:"Nhân viên",icon:e.jsx(ge,{}),path:"/users",group:"admin"},{text:"Cài đặt",icon:e.jsx(X,{}),path:"/settings",group:"admin"}],V=e=>{switch(e){case"inventory":return d(r.palette.info.main,.08);case"sales":return d(r.palette.success.main,.08);case"reports":return d(r.palette.warning.main,.08);case"admin":return d(r.palette.secondary.main,.08);default:return"transparent"}},M=()=>{I(null)},F=e=>{t(e),i&&c(!1)},N=(e,r=!1)=>r?a.pathname===e:a.pathname.startsWith(e);return e.jsxs(s,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(Ae,{position:"fixed",children:e.jsxs(g,{sx:{minHeight:70},children:[e.jsx(u,{color:"inherit","aria-label":"toggle drawer",edge:"start",onClick:()=>{i?c(!l):l?(c(!1),C(!0)):(c(!0),C(!1))},sx:{mr:2,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"rotate(180deg)",backgroundColor:"rgba(56, 189, 248, 0.1)"}},children:e.jsx(H,{})}),e.jsx(m,{variant:"h6",noWrap:!0,component:"div",sx:{mr:3,background:Ce.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:800,fontSize:"1.5rem"},children:"SmartPOS"}),e.jsxs(We,{children:[e.jsx(Ve,{children:e.jsx(q,{})}),e.jsx(Me,{placeholder:"Tìm kiếm sản phẩm, đơn hàng...",inputProps:{"aria-label":"search"}})]}),e.jsx(s,{sx:{flexGrow:1}}),e.jsx(f,{variant:"contained",sx:{display:{xs:"none",sm:"flex"},mr:2,background:Ce.success,borderRadius:"12px",padding:"10px 20px",fontWeight:600,textTransform:"none",boxShadow:ze.colored.primary,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-2px)",boxShadow:`${ze.colored.primary}, 0 20px 25px -5px rgba(34, 197, 94, 0.3)`}},startIcon:e.jsx(U,{}),onClick:()=>t("/sales/new"),children:"Bán hàng"}),e.jsx(j,{title:"Thông báo",children:e.jsx(u,{size:"large",color:"inherit",onClick:e=>{A(e.currentTarget)},sx:{mr:1,transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:Ee.primary[50],transform:"scale(1.1)"}},children:e.jsx(Fe,{badgeContent:3,color:"error",children:e.jsx(Y,{})})})}),e.jsxs(b,{id:"notification-menu",anchorEl:P,keepMounted:!0,open:Boolean(P),onClose:()=>{A(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:320,maxHeight:400}},children:[e.jsx(y,{children:e.jsxs(s,{sx:{width:"100%"},children:[e.jsx(m,{variant:"subtitle2",children:"Sản phẩm sắp hết hàng"}),e.jsx(m,{variant:"body2",color:"text.secondary",children:"5 sản phẩm đang dưới ngưỡng tồn kho"})]})}),e.jsx(_,{}),e.jsx(y,{children:e.jsxs(s,{sx:{width:"100%"},children:[e.jsx(m,{variant:"subtitle2",children:"Đơn hàng mới #1234"}),e.jsx(m,{variant:"body2",color:"text.secondary",children:"Vừa nhận đơn hàng trực tuyến mới"})]})}),e.jsx(_,{}),e.jsx(y,{children:e.jsxs(s,{sx:{width:"100%"},children:[e.jsx(m,{variant:"subtitle2",children:"Nhắc nhở"}),e.jsx(m,{variant:"body2",color:"text.secondary",children:"Cần đồng bộ dữ liệu kho hàng"})]})}),e.jsx(_,{}),e.jsx(y,{onClick:()=>t("/notifications"),children:e.jsx(m,{color:"primary",sx:{width:"100%",textAlign:"center"},children:"Xem tất cả thông báo"})})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(j,{title:`${n?.fullName||"User"}`,children:e.jsx(u,{size:"large",onClick:e=>{I(e.currentTarget)},color:"inherit",sx:{ml:1},children:e.jsx(Ne,{children:n?.username?.charAt(0).toUpperCase()||"A"})})}),e.jsxs(b,{id:"menu-appbar",anchorEl:z,keepMounted:!0,open:Boolean(z),onClose:M,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{elevation:2,sx:{width:220}},children:[e.jsx(y,{sx:{pointerEvents:"none"},children:e.jsxs(s,{sx:{width:"100%"},children:[e.jsx(m,{variant:"subtitle2",children:n?.fullName||n?.username}),e.jsx(m,{variant:"caption",color:"text.secondary",children:n?.role?n.role.charAt(0).toUpperCase()+n.role.slice(1):"User"})]})}),e.jsx(_,{}),e.jsxs(y,{onClick:()=>{M(),t("/profile")},children:[e.jsx(k,{children:e.jsx(Q,{fontSize:"small"})}),e.jsx(v,{children:"Hồ sơ cá nhân"})]}),e.jsxs(y,{onClick:()=>{M(),t("/settings")},children:[e.jsx(k,{children:e.jsx(X,{fontSize:"small"})}),e.jsx(v,{children:"Cài đặt"})]}),e.jsx(_,{}),e.jsxs(y,{onClick:async()=>{await o(),t("/login"),M()},children:[e.jsx(k,{children:e.jsx(K,{fontSize:"small"})}),e.jsx(v,{children:"Đăng xuất"})]})]})]})]})}),e.jsxs(De,{variant:i?"temporary":"persistent",anchor:"left",open:l,onClose:()=>c(!1),children:[e.jsx(g,{}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",overflowX:"hidden"},children:[e.jsxs(s,{sx:{overflowY:"auto",py:1},children:[e.jsx(w,{component:"nav",disablePadding:!0,children:D.map(t=>e.jsx(Be,{disablePadding:!0,className:N(t.path,t.exact)?"active":"",sx:{backgroundColor:V(t.group),borderRadius:"main"!==t.group?"8px":0,margin:"main"!==t.group?"2px 8px":0,"&:hover":{backgroundColor:"main"!==t.group?d(r.palette["inventory"===t.group?"info":"sales"===t.group?"success":"reports"===t.group?"warning":"primary"].main,.12):d(r.palette.primary.main,.08)}},children:e.jsxs(S,{selected:N(t.path,t.exact),onClick:()=>F(t.path),sx:{pl:2,borderRadius:"main"!==t.group?"8px":0,"&.Mui-selected":{backgroundColor:"main"!==t.group?d(r.palette["inventory"===t.group?"info":"sales"===t.group?"success":"reports"===t.group?"warning":"primary"].main,.15):d(r.palette.primary.main,.12)}},children:[e.jsx(k,{sx:{color:N(t.path,t.exact)?r.palette["inventory"===t.group?"info":"sales"===t.group?"success":"reports"===t.group?"warning":"primary"].main:"inherit"},children:t.icon}),e.jsx(v,{primary:t.text,primaryTypographyProps:{fontWeight:N(t.path,t.exact)?600:400,fontSize:"0.875rem"}})]})},t.text))}),e.jsx(_,{sx:{my:2}}),"admin"===n?.role&&e.jsx(w,{children:W.map(t=>e.jsx(Be,{disablePadding:!0,sx:{backgroundColor:V(t.group),borderRadius:"8px",margin:"2px 8px","&:hover":{backgroundColor:d(r.palette.secondary.main,.12)}},children:e.jsxs(S,{selected:N(t.path),onClick:()=>F(t.path),sx:{pl:2,borderRadius:"8px","&.Mui-selected":{backgroundColor:d(r.palette.secondary.main,.15)}},children:[e.jsx(k,{sx:{color:N(t.path)?r.palette.secondary.main:"inherit"},children:t.icon}),e.jsx(v,{primary:t.text,primaryTypographyProps:{fontWeight:N(t.path)?600:400,fontSize:"0.875rem"}})]})},t.text))})]}),i&&e.jsx(s,{sx:{p:2},children:e.jsx(f,{variant:"outlined",fullWidth:!0,onClick:()=>c(!1),startIcon:"rtl"===r.direction?e.jsx(G,{}):e.jsx(J,{}),children:"Đóng menu"})})]})]}),e.jsxs($e,{component:"main",sx:{width:{xs:"100%",md:l?"calc(100% - 240px)":"100%"},marginLeft:{xs:0,md:0},transition:r.transitions.create(["width","margin"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen})},children:[e.jsx(g,{}),e.jsx(E,{in:!0,timeout:800,children:e.jsx(m,{variant:"h4",component:"h1",sx:{mb:4,fontWeight:700,background:Ce.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",position:"relative",zIndex:1},children:(()=>{const e=a.pathname;return"/"===e?"Dashboard":"/sales/new"===e?"Điểm bán hàng":e.startsWith("/sales/")?"Chi tiết bán hàng":"/sales"===e?"Lịch sử bán hàng":"/products"===e?"Quản lý sản phẩm":e.startsWith("/products/")?"Chi tiết sản phẩm":"/categories"===e?"Danh mục":e.startsWith("/inventory/")?"Quản lý kho":"/customers"===e?"Khách hàng":"/reports"===e?"Báo cáo":e.startsWith("/reports/")?"Báo cáo & Thống kê":"/users"===e?"Quản lý nhân viên":"/settings"===e?"Cài đặt":"/finance"===e?"Tài chính":"/accounts"===e?"Công nợ":"/calendar"===e?"Lịch & Lịch hẹn":"/stores"===e?"Quản lý chi nhánh":"SmartPOS"})()})}),e.jsx(E,{in:!0,timeout:1e3,children:e.jsx(s,{sx:{position:"relative",zIndex:1},children:e.jsx(L,{})})})]})]})},qe=({children:r})=>{const{isAuthenticated:t,isLoading:a}=we();return a?e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(C,{size:60})}):t?e.jsx(e.Fragment,{children:r}):e.jsx(A,{to:"/login",replace:!0})},Ue=R.lazy(()=>je(()=>import("../pages/Login-535d7728.js"),["pages/Login-535d7728.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),Ye=R.lazy(()=>je(()=>import("../pages/Dashboard-2420be28.js"),["pages/Dashboard-2420be28.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js","chunks/chart-vendor-8aa27638.js","chunks/query-vendor-a9f5ea8b.js","chunks/ui-vendor-6aa703b7.js","chunks/utils-vendor-11713830.js"])),Qe=R.lazy(()=>je(()=>import("../pages/ProductList-5ccb1466.js"),["pages/ProductList-5ccb1466.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/useApiData-43bfc734.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/ui-vendor-6aa703b7.js","chunks/utils-vendor-11713830.js"])),Xe=R.lazy(()=>je(()=>import("../pages/ProductDetail-f377122c.js"),["pages/ProductDetail-f377122c.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/ui-vendor-6aa703b7.js","chunks/utils-vendor-11713830.js"])),Ke=R.lazy(()=>je(()=>import("../pages/ProductEdit-2c4bb7e7.js"),["pages/ProductEdit-2c4bb7e7.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/useApiData-43bfc734.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/ui-vendor-6aa703b7.js","chunks/utils-vendor-11713830.js"])),Ge=R.lazy(()=>je(()=>import("../pages/Categories-6d7161f2.js"),["pages/Categories-6d7161f2.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/useApiData-43bfc734.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),Je=R.lazy(()=>je(()=>import("../pages/Sales-c7b1fa9c.js"),["pages/Sales-c7b1fa9c.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/useApiData-43bfc734.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),Ze=R.lazy(()=>je(()=>import("../pages/NewSaleSimple-990996d6.js"),["pages/NewSaleSimple-990996d6.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/query-vendor-a9f5ea8b.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/utils-vendor-11713830.js"])),er=R.lazy(()=>je(()=>import("../pages/SaleDetail-ac777f3f.js"),["pages/SaleDetail-ac777f3f.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js"])),rr=R.lazy(()=>je(()=>import("../pages/Orders-214c15c2.js"),["pages/Orders-214c15c2.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),tr=R.lazy(()=>je(()=>import("../pages/Returns-33d73c22.js"),["pages/Returns-33d73c22.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/useApiData-43bfc734.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),ar=R.lazy(()=>je(()=>import("../pages/Promotions-29721ed3.js"),["pages/Promotions-29721ed3.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),nr=R.lazy(()=>je(()=>import("../pages/Inventory-738ea781.js"),["pages/Inventory-738ea781.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js"])),or=R.lazy(()=>je(()=>import("../pages/InventoryTransactions-c38ca9ed.js"),["pages/InventoryTransactions-c38ca9ed.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/useApiData-43bfc734.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),sr=R.lazy(()=>je(()=>import("../pages/StockInNew-32a3f26f.js"),["pages/StockInNew-32a3f26f.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/utils-vendor-11713830.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js"])),ir=R.lazy(()=>je(()=>import("../pages/StockTransfer-e5536132.js"),["pages/StockTransfer-e5536132.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/useApiData-43bfc734.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),lr=R.lazy(()=>je(()=>import("../pages/StockCheck-6f5f2735.js"),["pages/StockCheck-6f5f2735.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/useApiData-43bfc734.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),cr=R.lazy(()=>je(()=>import("../pages/SuppliersPage-2495756a.js"),["pages/SuppliersPage-2495756a.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/useApiData-43bfc734.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),pr=R.lazy(()=>je(()=>import("../pages/Reports-094d2e18.js"),["pages/Reports-094d2e18.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),dr=R.lazy(()=>je(()=>import("../pages/RevenueReport-260733e0.js"),["pages/RevenueReport-260733e0.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),hr=R.lazy(()=>je(()=>import("../pages/TopProductsReport-489427f2.js"),["pages/TopProductsReport-489427f2.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),xr=R.lazy(()=>je(()=>import("../pages/InventoryReport-75d9d075.js"),["pages/InventoryReport-75d9d075.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),gr=R.lazy(()=>je(()=>import("../pages/ProfitReport-8ca1bf32.js"),["pages/ProfitReport-8ca1bf32.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),ur=R.lazy(()=>je(()=>import("../pages/Customers-270647b9.js"),["pages/Customers-270647b9.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/useApiData-43bfc734.js","chunks/ui-vendor-6aa703b7.js","chunks/mui-icons-38bddb39.js","chunks/query-vendor-a9f5ea8b.js","chunks/utils-vendor-11713830.js"])),mr=R.lazy(()=>je(()=>import("../pages/CustomerDetail-d793e4fd.js"),["pages/CustomerDetail-d793e4fd.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js"])),fr=R.lazy(()=>je(()=>import("../pages/Finance-384dec00.js"),["pages/Finance-384dec00.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js","chunks/chart-vendor-8aa27638.js"])),jr=R.lazy(()=>je(()=>import("../pages/Accounts-d0616407.js"),["pages/Accounts-d0616407.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),br=R.lazy(()=>je(()=>import("../pages/Users-285b3651.js"),["pages/Users-285b3651.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),yr=R.lazy(()=>je(()=>import("../pages/Settings-5b0950f2.js"),["pages/Settings-5b0950f2.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),_r=R.lazy(()=>je(()=>import("../pages/Calendar-12dc3872.js"),["pages/Calendar-12dc3872.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),kr=R.lazy(()=>je(()=>import("../pages/Stores-ba80debc.js"),["pages/Stores-ba80debc.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),vr=R.lazy(()=>je(()=>import("../pages/Profile-4ea6e5fd.js"),["pages/Profile-4ea6e5fd.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js"])),wr=R.lazy(()=>je(()=>import("../pages/NotFound-17d1bcb0.js"),["pages/NotFound-17d1bcb0.js","chunks/mui-core-c8a509c2.js","chunks/react-vendor-546521e5.js","chunks/mui-icons-38bddb39.js"])),Sr=()=>e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#fafafa"},children:e.jsx(C,{size:60})});function Er(){return e.jsx(ve,{children:e.jsx(R.Suspense,{fallback:e.jsx(Sr,{}),children:e.jsxs(D,{children:[e.jsx(W,{path:"/login",element:e.jsx(Ue,{})}),e.jsx(W,{path:"/",element:e.jsx(A,{to:"/login",replace:!0})}),e.jsxs(W,{element:e.jsx(qe,{children:e.jsx(He,{})}),children:[e.jsx(W,{path:"/dashboard",element:e.jsx(Ye,{})}),e.jsx(W,{path:"/products",element:e.jsx(Qe,{})}),e.jsx(W,{path:"/products/:id/edit",element:e.jsx(Ke,{})}),e.jsx(W,{path:"/products/:id",element:e.jsx(Xe,{})}),e.jsx(W,{path:"/categories",element:e.jsx(Ge,{})}),e.jsx(W,{path:"/inventory",element:e.jsx(nr,{})}),e.jsx(W,{path:"/inventory/transactions",element:e.jsx(or,{})}),e.jsx(W,{path:"/inventory/stock-in",element:e.jsx(sr,{})}),e.jsx(W,{path:"/inventory/transfer",element:e.jsx(ir,{})}),e.jsx(W,{path:"/inventory/check",element:e.jsx(lr,{})}),e.jsx(W,{path:"/suppliers",element:e.jsx(cr,{})}),e.jsx(W,{path:"/sales/new",element:e.jsx(Ze,{})}),e.jsx(W,{path:"/sales/:id",element:e.jsx(er,{})}),e.jsx(W,{path:"/sales",element:e.jsx(Je,{})}),e.jsx(W,{path:"/orders",element:e.jsx(rr,{})}),e.jsx(W,{path:"/returns",element:e.jsx(tr,{})}),e.jsx(W,{path:"/promotions",element:e.jsx(ar,{})}),e.jsx(W,{path:"/customers",element:e.jsx(ur,{})}),e.jsx(W,{path:"/customers/:id",element:e.jsx(mr,{})}),e.jsx(W,{path:"/reports",element:e.jsx(pr,{})}),e.jsx(W,{path:"/reports/revenue",element:e.jsx(dr,{})}),e.jsx(W,{path:"/reports/top-products",element:e.jsx(hr,{})}),e.jsx(W,{path:"/reports/inventory",element:e.jsx(xr,{})}),e.jsx(W,{path:"/reports/profit",element:e.jsx(gr,{})}),e.jsx(W,{path:"/finance",element:e.jsx(fr,{})}),e.jsx(W,{path:"/accounts",element:e.jsx(jr,{})}),e.jsx(W,{path:"/calendar",element:e.jsx(_r,{})}),e.jsx(W,{path:"/stores",element:e.jsx(kr,{})}),e.jsx(W,{path:"/profile",element:e.jsx(vr,{})}),e.jsx(W,{path:"/users",element:e.jsx(br,{})}),e.jsx(W,{path:"/settings",element:e.jsx(yr,{})})]}),e.jsx(W,{path:"/404",element:e.jsx(wr,{})}),e.jsx(W,{path:"*",element:e.jsx(A,{replace:!0,to:"/404"})})]})})})}const Cr=new F({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e5,gcTime:6e5,refetchOnMount:!1,refetchOnReconnect:"always",networkMode:"online"},mutations:{retry:1,networkMode:"online"}}});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})}),ue.createRoot(document.getElementById("root")).render(e.jsx(V.StrictMode,{children:e.jsx(M,{children:e.jsx(N,{client:Cr,children:e.jsxs(z,{theme:Te,children:[e.jsx(I,{}),e.jsx(Er,{}),e.jsx(B,{position:"top-right"})]})})})}));export{_e as a,Ee as c,Se as f,Ce as g,ze as s,we as u};
