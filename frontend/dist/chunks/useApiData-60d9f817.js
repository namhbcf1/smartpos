import{r as n}from"./react-vendor-9ee90314.js";import{a3 as P,a as L}from"./utils-vendor-8faa4a85.js";import{a as w}from"../assets/index-fad1ea34.js";const I=(l,c={})=>{const[g,a]=n.useState([]),[h,e]=n.useState(null),[o,u]=n.useState(!0),[r,s]=n.useState(null),[y,U]=n.useState(1),[m,E]=n.useState(10),A=Object.fromEntries(Object.entries(c).filter(([p,i])=>i!==void 0));return n.useEffect(()=>{(async()=>{try{u(!0),s(null);const i={...A,page:y.toString(),limit:m.toString()},f=new URLSearchParams(i).toString(),S=f?`${l}?${f}`:l,d=await w.get(S);if(d&&typeof d=="object"){const t=d;l.includes("employees")&&(console.log("üêõ usePaginatedQuery employees response:",t),console.log("üêõ responseData.data:",t.data),console.log("üêõ responseData.data.data:",t.data?.data)),t.data&&t.data.success&&t.data.data&&t.data.data.data&&Array.isArray(t.data.data.data)?(console.log("üêõ Using API format, data length:",t.data.data.data.length),a(t.data.data.data||[]),e(t.data.data.pagination||null)):t.data&&t.data.data&&Array.isArray(t.data.data)?(console.log("üêõ Using nested format, data length:",t.data.data.length),a(t.data.data||[]),e(t.data.pagination||null)):t.data&&Array.isArray(t.data)?(console.log("üêõ Using simple nested format, data length:",t.data.length),a(t.data||[]),e(t.pagination||null)):Array.isArray(d)?(console.log("üêõ Using direct array format, data length:",d.length),a(d||[]),e(null)):(console.log("üêõ Using fallback empty array"),a([]),e(null))}else console.log("üêõ Response is not object, using empty array"),a([]),e(null)}catch(i){i instanceof P?i.response?.status===401?s("Phi√™n ƒëƒÉng nh·∫≠p ƒë√£ h·∫øt h·∫°n. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i."):i.response?.status===403?s("B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p d·ªØ li·ªáu n√†y."):i.response?.status>=500?s("L·ªói m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i sau."):s("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i."):s("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi m·∫°ng."),a([]),e(null)}finally{u(!1)}})()},[l,JSON.stringify(A),y,m]),{data:g,pagination:h,isLoading:o,error:r,refetch:()=>{(async()=>{try{u(!0),s(null);const i={...A,page:y.toString(),limit:m.toString()},f=new URLSearchParams(i).toString(),S=f?`${l}?${f}`:l,d=await w.get(S);if(d&&typeof d=="object"){const t=d;t.data&&t.data.success&&t.data.data&&t.data.data.data&&Array.isArray(t.data.data.data)?(a(t.data.data.data||[]),e(t.data.data.pagination||null)):t.data&&t.data.data&&Array.isArray(t.data.data)?(a(t.data.data||[]),e(t.data.pagination||null)):t.data&&Array.isArray(t.data)?(a(t.data||[]),e(t.pagination||null)):Array.isArray(d)?(a(d||[]),e(null)):(a([]),e(null))}else a([]),e(null)}catch(i){i instanceof P?i.response?.status===401?s("Phi√™n ƒëƒÉng nh·∫≠p ƒë√£ h·∫øt h·∫°n. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i."):i.response?.status===403?s("B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p d·ªØ li·ªáu n√†y."):i.response?.status>=500?s("L·ªói m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i sau."):s("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i."):s("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi m·∫°ng."),a([]),e(null)}finally{u(!1)}})()},handlePageChange:p=>{U(p)},handleLimitChange:p=>{E(p),U(1)},page:y,limit:m}},$=l=>{const[c,g]=n.useState(null),[a,h]=n.useState(!0),[e,o]=n.useState(null);return n.useEffect(()=>{(async()=>{try{h(!0);const r=await w.get(l);g(r)}catch(r){console.error("‚ùå useQuery: Error fetching data:",r),r instanceof P?r.response?.status===401?o("Phi√™n ƒëƒÉng nh·∫≠p ƒë√£ h·∫øt h·∫°n. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i."):r.response?.status===403?o("B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p d·ªØ li·ªáu n√†y."):r.response?.status>=500?o("L·ªói m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i sau."):o("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i."):o("Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi m·∫°ng."),g(null)}finally{h(!1)}})()},[l]),{data:c,loading:a,error:e}},K=()=>{const[l,c]=n.useState(!1),[g,a]=n.useState(null);return{deleteItem:async e=>{try{c(!0),a(null);const u=`https://smartpos-api.bangachieu2.workers.dev/api/v1${e}`,r=await L.delete(u,{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});if(r.data.success)return!0;throw new Error(r.data.message||"Delete failed")}catch(o){return a("Kh√¥ng th·ªÉ x√≥a d·ªØ li·ªáu"),console.error("Error deleting item:",o),!1}finally{c(!1)}},loading:l,error:g}},R=()=>{const[l,c]=n.useState(!1),[g,a]=n.useState(null);return{create:async(e,o)=>{try{c(!0),a(null);const r=`https://smartpos-api.bangachieu2.workers.dev/api/v1${e}`,s=await L.post(r,o,{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});if(s.data.success)return s.data.data;throw new Error(s.data.message||"Create failed")}catch(u){return a("Kh√¥ng th·ªÉ t·∫°o d·ªØ li·ªáu"),console.error("Error creating item:",u),null}finally{c(!1)}},loading:l,error:g}},v=()=>{const[l,c]=n.useState(!1),[g,a]=n.useState(null);return{update:async(e,o)=>{try{c(!0),a(null);const r=`https://smartpos-api.bangachieu2.workers.dev/api/v1${e}`,s=await L.put(r,o,{headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});if(s.data.success)return s.data.data;throw new Error(s.data.message||"Update failed")}catch(u){return a("Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu"),console.error("Error updating item:",u),null}finally{c(!1)}},loading:l,error:g}};export{K as a,v as b,R as c,$ as d,I as u};
