import{j as s,W as n,ad as S,I as m,T as r,ae as b,aj as o,Y as f,aA as P,Z as N,C as g,a3 as j,t as v}from"../chunks/mui-core-cd9e8750.js";import{j as E,u as Q,r as d}from"../chunks/react-vendor-9ee90314.js";import{$ as p,l as A,k as B,y as M,j as z,S as G}from"../chunks/mui-icons-f0327ae6.js";const h=i=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(i),O=()=>{const{id:i}=E(),c=Q(),[e,C]=d.useState(null),[w,u]=d.useState(!0),[y,l]=d.useState(null);d.useEffect(()=>{T()},[i]);const T=async()=>{try{u(!0),l(null),console.log("üîç Fetching product with ID:",i),console.log("üì° Calling products API directly...");const a=await(await fetch("https://smartpos-api.bangachieu2.workers.dev/api/v1/products?limit=100")).json();if(console.log("üì¶ Products API response:",a),a.success&&a.data&&a.data.data){const x=a.data.data.find(k=>k.id===parseInt(i||"0"));x?(console.log("‚úÖ Found product from API:",x),C(x)):(console.log("‚ùå Product not found in API response"),l("Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m"))}else console.log("‚ùå Invalid API response format"),l("Kh√¥ng th·ªÉ t·∫£i danh s√°ch s·∫£n ph·∫©m")}catch(t){console.error("‚ùå Error fetching product:",t),l("Kh√¥ng th·ªÉ t·∫£i th√¥ng tin s·∫£n ph·∫©m")}finally{u(!1)}},D=(t,a)=>t<=0?{label:"H·∫øt h√†ng",color:"error"}:t<=a?{label:"S·∫Øp h·∫øt",color:"warning"}:{label:"C√≤n h√†ng",color:"success"};if(w)return s.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:s.jsx(S,{})});if(y)return s.jsxs(n,{p:3,children:[s.jsxs(n,{display:"flex",alignItems:"center",mb:3,children:[s.jsx(m,{onClick:()=>c("/sales/new"),sx:{mr:2},children:s.jsx(p,{})}),s.jsx(r,{variant:"h4",component:"h1",children:"Chi ti·∫øt s·∫£n ph·∫©m"})]}),s.jsx(b,{severity:"error",children:y})]});if(!e)return s.jsxs(n,{p:3,children:[s.jsxs(n,{display:"flex",alignItems:"center",mb:3,children:[s.jsx(m,{onClick:()=>c("/sales/new"),sx:{mr:2},children:s.jsx(p,{})}),s.jsx(r,{variant:"h4",component:"h1",children:"Chi ti·∫øt s·∫£n ph·∫©m"})]}),s.jsx(b,{severity:"info",children:"Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m"})]});const I=D(e.stockQuantity,e.stockAlertThreshold);return s.jsxs(n,{p:3,children:[s.jsxs(n,{display:"flex",alignItems:"center",mb:3,children:[s.jsx(m,{onClick:()=>c("/sales/new"),sx:{mr:2},children:s.jsx(p,{})}),s.jsx(r,{variant:"h4",component:"h1",children:"Chi ti·∫øt s·∫£n ph·∫©m"})]}),s.jsxs(o,{container:!0,spacing:3,children:[s.jsx(o,{item:!0,xs:12,md:4,children:s.jsx(f,{children:s.jsx(P,{component:"img",height:"300",image:e.imageUrl||"/placeholder-product.jpg",alt:e.name,sx:{objectFit:"cover"},onError:t=>{t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0xNTAgMTAwQzEyNy45MSAxMDAgMTEwIDExNy45MSAxMTAgMTQwQzExMCAxNjIuMDkgMTI3LjkxIDE4MCAxNTAgMTgwQzE3Mi4wOSAxODAgMTkwIDE2Mi4wOSAxOTAgMTQwQzE5MCAxMTcuOTEgMTcyLjA5IDEwMCAxNTAgMTAwWiIgZmlsbD0iI0NDQ0NDQyIvPgo8cGF0aCBkPSJNMTIwIDIwMEgxODBWMjIwSDEyMFYyMDBaIiBmaWxsPSIjQ0NDQ0NDIi8+CjwvdGc+Cjwvc3ZnPgo="}})})}),s.jsx(o,{item:!0,xs:12,md:8,children:s.jsx(f,{children:s.jsxs(N,{children:[s.jsx(r,{variant:"h5",component:"h2",gutterBottom:!0,children:e.name}),s.jsxs(n,{display:"flex",gap:1,mb:2,children:[s.jsx(g,{label:I.label,color:I.color,size:"small"}),s.jsx(g,{label:e.isActive?"Ho·∫°t ƒë·ªông":"Kh√¥ng ho·∫°t ƒë·ªông",color:e.isActive?"success":"default",size:"small"}),s.jsx(g,{label:"TH·ª∞C T·∫æ 100%",color:"primary",size:"small"})]}),s.jsx(j,{sx:{my:2}}),s.jsxs(o,{container:!0,spacing:2,children:[s.jsxs(o,{item:!0,xs:12,sm:6,children:[s.jsxs(n,{display:"flex",alignItems:"center",mb:1,children:[s.jsx(A,{sx:{mr:1,color:"text.secondary"}}),s.jsxs(r,{variant:"body2",color:"text.secondary",children:["SKU: ",e.sku]})]}),e.barcode&&s.jsxs(n,{display:"flex",alignItems:"center",mb:1,children:[s.jsx(A,{sx:{mr:1,color:"text.secondary"}}),s.jsxs(r,{variant:"body2",color:"text.secondary",children:["Barcode: ",e.barcode]})]}),s.jsxs(n,{display:"flex",alignItems:"center",mb:1,children:[s.jsx(B,{sx:{mr:1,color:"text.secondary"}}),s.jsxs(r,{variant:"body2",color:"text.secondary",children:["Danh m·ª•c: ",e.categoryName||"Ch∆∞a ph√¢n lo·∫°i"]})]}),e.brand&&s.jsx(n,{display:"flex",alignItems:"center",mb:1,children:s.jsxs(r,{variant:"body2",color:"text.secondary",children:["Th∆∞∆°ng hi·ªáu: ",e.brand]})})]}),s.jsxs(o,{item:!0,xs:12,sm:6,children:[s.jsxs(n,{display:"flex",alignItems:"center",mb:1,children:[s.jsx(M,{sx:{mr:1,color:"text.secondary"}}),s.jsx(r,{variant:"body2",color:"text.secondary",children:"Gi√° b√°n:"}),s.jsx(r,{variant:"h6",color:"primary",sx:{ml:1},children:h(e.price)})]}),s.jsxs(n,{display:"flex",alignItems:"center",mb:1,children:[s.jsx(M,{sx:{mr:1,color:"text.secondary"}}),s.jsxs(r,{variant:"body2",color:"text.secondary",children:["Gi√° v·ªën: ",h(e.costPrice)]})]}),s.jsx(n,{display:"flex",alignItems:"center",mb:1,children:s.jsxs(r,{variant:"body2",color:"text.secondary",children:["Thu·∫ø VAT: ",e.taxRate*100,"%"]})}),s.jsxs(n,{display:"flex",alignItems:"center",mb:1,children:[s.jsx(z,{sx:{mr:1,color:"text.secondary"}}),s.jsxs(r,{variant:"body2",color:"text.secondary",children:["T·ªìn kho: ",e.stockQuantity," s·∫£n ph·∫©m"]})]})]})]}),s.jsx(j,{sx:{my:2}}),s.jsx(r,{variant:"h6",gutterBottom:!0,children:"M√¥ t·∫£ s·∫£n ph·∫©m"}),s.jsx(r,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description||`Chi ti·∫øt s·∫£n ph·∫©m ${e.name}. 

üîß Th√¥ng s·ªë k·ªπ thu·∫≠t:
- SKU: ${e.sku}
- Danh m·ª•c: ${e.categoryName||"Linh ki·ªán m√°y t√≠nh"}
- Th∆∞∆°ng hi·ªáu: ${e.brand||"Ch√≠nh h√£ng"}

üí∞ Th√¥ng tin gi√°:
- Gi√° b√°n: ${h(e.price)}
- Gi√° v·ªën: ${h(e.costPrice)}
- Thu·∫ø VAT: ${e.taxRate*100||0}%

üì¶ T·ªìn kho:
- S·ªë l∆∞·ª£ng hi·ªán c√≥: ${e.stockQuantity} s·∫£n ph·∫©m
- M·ª©c c·∫£nh b√°o: ${e.stockAlertThreshold} s·∫£n ph·∫©m

‚úÖ Tr·∫°ng th√°i: ${e.isActive?"ƒêang kinh doanh":"Ng·ª´ng kinh doanh"}

S·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao, ƒë∆∞·ª£c nh·∫≠p kh·∫©u ch√≠nh h√£ng v·ªõi ƒë·∫ßy ƒë·ªß gi·∫•y t·ªù b·∫£o h√†nh.`}),s.jsxs(r,{variant:"body2",color:"success.main",paragraph:!0,children:["‚úÖ ",s.jsx("strong",{children:"D·ªØ li·ªáu th·ª±c t·∫ø 100%"})," - ƒê∆∞·ª£c l·∫•y tr·ª±c ti·∫øp t·ª´ API SmartPOS"]}),s.jsx(j,{sx:{my:2}}),s.jsxs(n,{display:"flex",gap:2,children:[s.jsx(v,{variant:"contained",startIcon:s.jsx(G,{}),onClick:()=>c("/sales/new"),children:"Th√™m v√†o gi·ªè h√†ng"}),s.jsx(v,{variant:"outlined",onClick:()=>c("/products"),children:"Qu·∫£n l√Ω s·∫£n ph·∫©m"})]})]})})})]})]})};export{O as default};
