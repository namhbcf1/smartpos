import{a4 as b,s as u,Y as je,k as fe,W as g,j as e,t as ye,ad as ve,af as Ce,ap as ke,E as P,aj as c,T as s,F as Se,Z as D,av as x,A as we,ak as Te,al as ze,am as Ie,ab as B,V as W,aq as Me,ar as De,as as $,at as n,au as We,ae as $e,C as X,ax as Fe,D as U,ay as G,o as Q,az as Re,v as V,aC as _e,aD as Be}from"../chunks/mui-core-cd9e8750.js";import{r as m,b as Pe}from"../chunks/react-vendor-9ee90314.js";import{u as Z,a as Ye,c as Ae,b as Le}from"../chunks/useApiData-60d9f817.js";import{c as a,s as d,g as y}from"../assets/index-fad1ea34.js";import{a as Ee}from"../chunks/ui-vendor-11834b8a.js";import{k as J,T as He,a as ee,Y as re,j as ae,e as Ke,t as Ne,U as Oe,Z as qe,_ as Xe}from"../chunks/mui-icons-f0327ae6.js";import"../chunks/utils-vendor-8faa4a85.js";import"../chunks/query-vendor-0e167262.js";const Ue=b`
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
`,Ge=b`
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
`,Qe=b`
  0%, 100% {
    box-shadow: 0 0 20px rgba(14, 165, 233, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(14, 165, 233, 0.6);
  }
`,Ve=u(je)(({theme:t})=>({borderRadius:24,background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",border:`1px solid ${a.gray[200]}`,boxShadow:d.soft,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(
      90deg,
      transparent,
      ${fe(a.primary[500],.1)},
      transparent
    )`,transition:"left 0.6s"},"&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:d.large,borderColor:a.primary[300],"&::before":{left:"100%"}},"&.featured":{background:`linear-gradient(135deg,
      rgba(255, 255, 255, 0.9) 0%,
      rgba(14, 165, 233, 0.05) 100%
    )`,borderColor:a.primary[300],animation:`${Qe} 3s ease-in-out infinite`},"&.loading":{background:`
      linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)
    `,backgroundSize:"200px 100%",animation:`${Ue} 1.5s infinite`}})),Ze=u(g)(({theme:t})=>({position:"absolute",top:0,left:0,right:0,height:"4px",background:y.primary,borderRadius:"24px 24px 0 0"})),Je=u(g)(({theme:t})=>({position:"absolute",top:16,right:16,width:48,height:48,borderRadius:"50%",background:y.primary,display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:d.colored.primary,animation:`${Ge} 3s ease-in-out infinite`,"& svg":{fontSize:"1.5rem"}})),er=({children:t,featured:l=!1,loading:v=!1,icon:C,gradient:j=!0,onClick:h,className:f,...k})=>e.jsxs(Ve,{className:`
        ${l?"featured":""} 
        ${v?"loading":""} 
        ${f||""}
      `.trim(),onClick:h,sx:{cursor:h?"pointer":"default"},...k,children:[j&&e.jsx(Ze,{}),C&&e.jsx(Je,{children:C}),t]});b`
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
`;b`
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
`;const rr=b`
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
`,ar=u(ye)(({theme:t})=>({borderRadius:16,padding:"14px 28px",fontSize:"0.875rem",fontWeight:600,textTransform:"none",position:"relative",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",transition:"left 0.5s"},"&:hover::before":{left:"100%"},"&.MuiButton-containedPrimary":{background:y.primary,boxShadow:d.colored.primary,"&:hover":{transform:"translateY(-3px)",boxShadow:`${d.colored.primary}, 0 20px 25px -5px rgba(14, 165, 233, 0.3)`},"&:active":{transform:"translateY(-1px)"}},"&.MuiButton-containedSecondary":{background:y.secondary,boxShadow:d.colored.secondary,"&:hover":{transform:"translateY(-3px)",boxShadow:`${d.colored.secondary}, 0 20px 25px -5px rgba(245, 158, 11, 0.3)`}},"&.MuiButton-containedSuccess":{background:y.success,boxShadow:"0 10px 15px -3px rgba(34, 197, 94, 0.3), 0 4px 6px -2px rgba(34, 197, 94, 0.1)","&:hover":{transform:"translateY(-3px)",boxShadow:"0 20px 25px -5px rgba(34, 197, 94, 0.4), 0 10px 10px -5px rgba(34, 197, 94, 0.2)"}},"&.MuiButton-containedError":{background:"linear-gradient(135deg, #f59e0b 0%, #ef4444 100%)",boxShadow:"0 10px 15px -3px rgba(239, 68, 68, 0.3), 0 4px 6px -2px rgba(239, 68, 68, 0.1)","&:hover":{transform:"translateY(-3px)",boxShadow:"0 20px 25px -5px rgba(239, 68, 68, 0.4), 0 10px 10px -5px rgba(239, 68, 68, 0.2)"}},"&.MuiButton-outlined":{borderWidth:2,borderColor:a.gray[300],color:a.gray[700],background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)","&:hover":{borderColor:a.primary[500],backgroundColor:a.primary[50],transform:"translateY(-2px)",boxShadow:d.soft}},"&.MuiButton-text":{color:a.gray[600],"&:hover":{backgroundColor:a.gray[100],color:a.primary[600],transform:"translateY(-1px)"}},"&.loading":{pointerEvents:"none",animation:`${rr} 1.5s ease-in-out infinite`},"&.Mui-disabled":{background:a.gray[200],color:a.gray[400],transform:"none",boxShadow:"none"},"&.MuiButton-sizeSmall":{padding:"8px 16px",fontSize:"0.75rem",borderRadius:12},"&.MuiButton-sizeLarge":{padding:"18px 36px",fontSize:"1rem",borderRadius:20}})),p=({children:t,loading:l=!1,gradient:v=!0,glow:C=!1,disabled:j,startIcon:h,endIcon:f,...k})=>e.jsx(ar,{...k,disabled:j||l,className:`${l?"loading":""} ${k.className||""}`,startIcon:l?void 0:h,endIcon:l?void 0:f,children:l?e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ve,{size:16,sx:{color:"inherit",opacity:.8}}),e.jsx("span",{children:"Đang xử lý..."})]}):t}),Y=b`
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`;b`
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
`;const tr=u(Ce)(({theme:t})=>({padding:t.spacing(2,3),maxWidth:"xl",minHeight:"100vh",backgroundColor:t.palette.grey[50]})),nr=u(g)(({theme:t})=>({marginBottom:t.spacing(4),animation:`${Y} 0.6s ease-out`})),F=u(er)(({theme:t})=>({height:"100%",background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",border:`1px solid ${a.gray[700]}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:d.large},"&.primary":{borderColor:a.primary[400],background:`linear-gradient(135deg,
      rgba(30, 41, 59, 0.95) 0%,
      rgba(14, 165, 233, 0.1) 100%
    )`},"&.success":{borderColor:a.success[400],background:`linear-gradient(135deg,
      rgba(30, 41, 59, 0.95) 0%,
      rgba(34, 197, 94, 0.1) 100%
    )`}})),ir=u(g)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:t.spacing(3),padding:t.spacing(2),background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",borderRadius:16,border:`1px solid ${a.gray[700]}`,animation:`${Y} 0.8s ease-out`})),or=u(ke)(({theme:t})=>({borderRadius:20,background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(20px)",border:`1px solid ${a.gray[700]}`,boxShadow:d.soft,overflow:"hidden",animation:`${Y} 1s ease-out`})),sr=u(P)(({theme:t})=>({"& .MuiOutlinedInput-root":{borderRadius:12,backgroundColor:"rgba(51, 65, 85, 0.8)",backdropFilter:"blur(10px)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(51, 65, 85, 0.9)"},"&.Mui-focused":{backgroundColor:"rgba(51, 65, 85, 0.95)",transform:"translateY(-2px)",boxShadow:d.colored.primary}}})),pr=()=>{const{enqueueSnackbar:t}=Ee(),[l,v]=m.useState(""),[C,j]=m.useState(""),[h,f]=m.useState(""),[k,T]=m.useState(!1),[te,S]=m.useState(!1),[A,ne]=m.useState(null),[z,R]=m.useState(null),[i,w]=m.useState({name:"",description:"",is_active:!0});Pe.useEffect(()=>{const r=setTimeout(()=>{j(l)},500);return()=>clearTimeout(r)},[l]);const ie=m.useMemo(()=>({search:C,is_active:h===""?void 0:h==="true"?"true":"false",sortBy:"name",sortDirection:"asc"}),[C,h]),{data:L,pagination:E,isLoading:oe,refetch:_,handlePageChange:se,handleLimitChange:le,page:ce,limit:H}=Z("/categories",ie),{data:I,isLoading:M}=Z("/categories",{limit:1e3,page:1,sortBy:"name",sortDirection:"asc"}),K=Ye(),N=Ae(),O=Le(),de=r=>{ne(r),T(!0)},he=async()=>{A&&(await K.deleteItem(`/categories/${A}`)?(_(),T(!1),t("Xóa danh mục thành công",{variant:"success"})):t("Không thể xóa danh mục",{variant:"error"}))},xe=()=>{R(null),q(),S(!0)},ge=r=>{R(r),w({name:r.name,description:r.description||"",is_active:r.is_active}),S(!0)},q=()=>{w({name:"",description:"",is_active:!0}),R(null)},ue=async()=>{if(!i.name.trim()){t("Tên danh mục không được để trống",{variant:"error"});return}const r={name:i.name.trim(),description:i.description.trim()||null,is_active:i.is_active};let o=null;z?(o=await O.update(`/categories/${z.id}`,r),o?t("Cập nhật danh mục thành công",{variant:"success"}):t("Không thể cập nhật danh mục",{variant:"error"})):(o=await N.create("/categories",r),o?t("Tạo danh mục thành công",{variant:"success"}):t("Không thể tạo danh mục",{variant:"error"})),o&&(_(),S(!1),q())},me=()=>{v(""),j(""),f("")},pe=()=>{v(""),j(""),f(""),_()};return e.jsxs(tr,{maxWidth:"xl",children:[e.jsxs(g,{sx:{py:{xs:1,sm:2}},children:[e.jsx(nr,{children:e.jsxs(c,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{mb:4},children:[e.jsxs(c,{item:!0,children:[e.jsxs(s,{variant:"h3",sx:{fontWeight:800,background:y.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",gap:2},children:[e.jsx(J,{sx:{fontSize:"2.5rem",color:a.primary[500]}}),"Quản lý danh mục"]}),e.jsx(s,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Tổ chức và quản lý danh mục sản phẩm một cách hiệu quả"})]}),e.jsx(c,{item:!0,children:e.jsx(p,{variant:"contained",color:"primary",size:"large",startIcon:e.jsx(He,{}),onClick:xe,sx:{background:y.primary,borderRadius:"16px",padding:"12px 24px"},children:"Thêm danh mục"})})]})}),e.jsx(Se,{in:!0,timeout:800,children:e.jsxs(c,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(F,{className:"primary",icon:e.jsx(J,{}),children:e.jsxs(D,{sx:{textAlign:"center",py:3},children:[e.jsx(s,{variant:"h3",sx:{fontWeight:800,color:a.primary[600]},children:M?e.jsx(x,{width:60,height:40}):I?.length||0}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Tổng danh mục"})]})})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(F,{className:"success",icon:e.jsx(ee,{}),children:e.jsxs(D,{sx:{textAlign:"center",py:3},children:[e.jsx(s,{variant:"h3",sx:{fontWeight:800,color:a.success[600]},children:M?e.jsx(x,{width:60,height:40}):I?.filter(r=>r.is_active).length||0}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Đang hoạt động"})]})})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(F,{icon:e.jsx(re,{}),children:e.jsxs(D,{sx:{textAlign:"center",py:3},children:[e.jsx(s,{variant:"h3",sx:{fontWeight:800,color:a.error[600]},children:M?e.jsx(x,{width:60,height:40}):I?.filter(r=>!r.is_active).length||0}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Không hoạt động"})]})})}),e.jsx(c,{item:!0,xs:12,sm:6,md:3,children:e.jsx(F,{icon:e.jsx(ae,{}),children:e.jsxs(D,{sx:{textAlign:"center",py:3},children:[e.jsx(s,{variant:"h3",sx:{fontWeight:800,color:a.secondary[600]},children:M?e.jsx(x,{width:60,height:40}):I?.reduce((r,o)=>r+(o.product_count||0),0)||0}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Sản phẩm"})]})})})]})}),e.jsxs(ir,{children:[e.jsxs(g,{sx:{display:"flex",gap:2,alignItems:"center",flex:1},children:[e.jsx(sr,{label:"Tìm kiếm danh mục",variant:"outlined",size:"medium",value:l,onChange:r=>v(r.target.value),sx:{minWidth:300},InputProps:{startAdornment:e.jsx(we,{position:"start",children:e.jsx(Ke,{sx:{color:a.gray[500]}})})}}),e.jsxs(Te,{size:"medium",sx:{minWidth:200},children:[e.jsx(ze,{children:"Trạng thái"}),e.jsxs(Ie,{value:h,onChange:r=>f(r.target.value),label:"Trạng thái",sx:{borderRadius:3,backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)"},children:[e.jsx(B,{value:"",children:"Tất cả"}),e.jsx(B,{value:"true",children:"Hoạt động"}),e.jsx(B,{value:"false",children:"Không hoạt động"})]})]})]}),e.jsxs(g,{sx:{display:"flex",gap:1},children:[e.jsx(W,{title:"Làm mới",children:e.jsx(p,{variant:"outlined",size:"medium",onClick:pe,sx:{minWidth:"auto",px:2},children:e.jsx(Ne,{})})}),e.jsx(W,{title:"Xóa bộ lọc",children:e.jsx(p,{variant:"outlined",size:"medium",onClick:me,sx:{minWidth:"auto",px:2},children:e.jsx(Oe,{})})})]})]}),e.jsxs(or,{children:[e.jsxs(Me,{children:[e.jsx(De,{children:e.jsxs($,{children:[e.jsx(n,{children:"Tên danh mục"}),e.jsx(n,{children:"Mô tả"}),e.jsx(n,{align:"center",children:"Số sản phẩm"}),e.jsx(n,{align:"center",children:"Trạng thái"}),e.jsx(n,{align:"center",children:"Ngày tạo"}),e.jsx(n,{align:"center",children:"Thao tác"})]})}),e.jsx(We,{children:oe?Array.from(Array(H)).map((r,o)=>e.jsxs($,{children:[e.jsx(n,{children:e.jsx(x,{variant:"text"})}),e.jsx(n,{children:e.jsx(x,{variant:"text"})}),e.jsx(n,{children:e.jsx(x,{variant:"text"})}),e.jsx(n,{children:e.jsx(x,{variant:"circular",width:80,height:24})}),e.jsx(n,{children:e.jsx(x,{variant:"text"})}),e.jsx(n,{children:e.jsx(x,{variant:"rectangular",width:80,height:32})})]},o)):L.length===0?e.jsx($,{children:e.jsx(n,{colSpan:6,align:"center",children:e.jsx($e,{severity:"info",sx:{m:2},children:l||h!==""?"Không tìm thấy danh mục nào phù hợp với bộ lọc":"Chưa có danh mục nào. Hãy tạo danh mục đầu tiên!"})})}):L.map(r=>e.jsxs($,{hover:!0,children:[e.jsx(n,{children:e.jsx(s,{variant:"body1",fontWeight:"medium",children:r.name})}),e.jsx(n,{children:e.jsx(s,{variant:"body2",color:"text.secondary",children:r.description||"Không có mô tả"})}),e.jsx(n,{align:"center",children:e.jsx(X,{icon:e.jsx(ae,{fontSize:"small"}),label:r.product_count||0,size:"small",sx:{backgroundColor:a.primary[100],color:a.primary[800],fontWeight:600,borderRadius:"20px"}})}),e.jsx(n,{align:"center",children:e.jsx(X,{size:"small",icon:r.is_active?e.jsx(ee,{fontSize:"small"}):e.jsx(re,{fontSize:"small"}),label:r.is_active?"Hoạt động":"Không hoạt động",className:r.is_active?"active":"inactive",sx:{backgroundColor:r.is_active?a.success[100]:a.error[100],color:r.is_active?a.success[800]:a.error[800],border:`1px solid ${r.is_active?a.success[300]:a.error[300]}`,fontWeight:600,borderRadius:"20px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"scale(1.05)"}}})}),e.jsx(n,{align:"center",children:e.jsx(s,{variant:"body2",children:new Date(r.created_at).toLocaleDateString("vi-VN")})}),e.jsx(n,{align:"center",children:e.jsxs(g,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e.jsx(W,{title:"Sửa",children:e.jsx(p,{variant:"outlined",size:"small",onClick:()=>ge(r),sx:{minWidth:"auto",px:1.5,borderColor:a.primary[300],color:a.primary[600],"&:hover":{borderColor:a.primary[500],backgroundColor:a.primary[50]}},children:e.jsx(qe,{fontSize:"small"})})}),e.jsx(W,{title:"Xóa",children:e.jsx(p,{variant:"outlined",size:"small",onClick:()=>de(r.id),disabled:!!(r.product_count&&r.product_count>0),sx:{minWidth:"auto",px:1.5,borderColor:a.error[300],color:a.error[600],"&:hover":{borderColor:a.error[500],backgroundColor:a.error[50]},"&.Mui-disabled":{borderColor:a.gray[200],color:a.gray[400]}},children:e.jsx(Xe,{fontSize:"small"})})})]})})]},r.id))})]}),E&&e.jsx(g,{sx:{p:2,borderTop:`1px solid ${a.gray[200]}`,background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)"},children:e.jsx(Fe,{component:"div",count:E.total,page:ce-1,rowsPerPage:H,onPageChange:(r,o)=>se(o+1),onRowsPerPageChange:r=>le(parseInt(r.target.value,10)),labelRowsPerPage:"Hiển thị:",labelDisplayedRows:({from:r,to:o,count:be})=>`${r}-${o} của ${be}`,rowsPerPageOptions:[10,25,50,100],sx:{"& .MuiTablePagination-toolbar":{paddingLeft:0,paddingRight:0},"& .MuiTablePagination-selectLabel, & .MuiTablePagination-displayedRows":{fontWeight:500,color:a.gray[600]},"& .MuiIconButton-root":{borderRadius:"8px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:a.primary[50],transform:"scale(1.1)"}}}})})]})]}),e.jsxs(U,{open:k,onClose:()=>T(!1),children:[e.jsx(G,{children:"Xác nhận xóa"}),e.jsx(Q,{children:e.jsx(Re,{children:"Bạn có chắc chắn muốn xóa danh mục này không? Hành động này không thể hoàn tác."})}),e.jsxs(V,{children:[e.jsx(p,{variant:"outlined",onClick:()=>T(!1),children:"Hủy"}),e.jsx(p,{variant:"contained",color:"error",onClick:he,loading:K.loading,children:"Xóa"})]})]}),e.jsxs(U,{open:te,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(G,{children:z?"Sửa danh mục":"Thêm danh mục mới"}),e.jsx(Q,{children:e.jsxs(c,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(P,{label:"Tên danh mục *",value:i.name,onChange:r=>w({...i,name:r.target.value}),fullWidth:!0,error:!i.name.trim(),helperText:i.name.trim()?"":"Tên danh mục không được để trống"})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(P,{label:"Mô tả",value:i.description,onChange:r=>w({...i,description:r.target.value}),fullWidth:!0,multiline:!0,rows:3,placeholder:"Nhập mô tả cho danh mục..."})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(_e,{control:e.jsx(Be,{checked:i.is_active,onChange:r=>w({...i,is_active:r.target.checked})}),label:"Kích hoạt danh mục"})})]})}),e.jsxs(V,{children:[e.jsx(p,{variant:"outlined",onClick:()=>S(!1),children:"Hủy"}),e.jsx(p,{onClick:ue,variant:"contained",color:"primary",loading:N.loading||O.loading,disabled:!i.name.trim(),children:z?"Cập nhật":"Tạo mới"})]})]})]})};export{pr as default};
