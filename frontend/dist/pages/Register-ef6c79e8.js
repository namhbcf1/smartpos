import{e as y,p as S,j as e,af as P,P as T,W as u,T as c,$ as C,E as l,ak as W,al as _,am as E,ab as h,t as q,a3 as M}from"../chunks/mui-core-cd9e8750.js";import{u as R,r as d,L as D}from"../chunks/react-vendor-9ee90314.js";import{a as L}from"../chunks/ui-vendor-11834b8a.js";import{a as F}from"../assets/index-fad1ea34.js";import{o as I}from"../chunks/mui-icons-f0327ae6.js";import"../chunks/query-vendor-0e167262.js";import"../chunks/utils-vendor-8faa4a85.js";const K=()=>{const x=R(),p=y();S(p.breakpoints.down("md"));const{enqueueSnackbar:m}=L(),[r,b]=d.useState({username:"",email:"",password:"",confirmPassword:"",full_name:"",phone:"",role:"cashier",store_id:1}),[n,g]=d.useState(!1),[w,V]=d.useState(!1),[j,B]=d.useState(!1),[s,f]=d.useState({}),t=a=>i=>{b(o=>({...o,[a]:i.target.value})),s[a]&&f(o=>({...o,[a]:""}))},k=()=>{const a={};return r.username.trim()?r.username.length<3&&(a.username="TÃªn Ä‘Äƒng nháº­p pháº£i cÃ³ Ã­t nháº¥t 3 kÃ½ tá»±"):a.username="TÃªn Ä‘Äƒng nháº­p lÃ  báº¯t buá»™c",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(a.email="Email khÃ´ng há»£p lá»‡"):a.email="Email lÃ  báº¯t buá»™c",r.password?r.password.length<8&&(a.password="Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 8 kÃ½ tá»±"):a.password="Máº­t kháº©u lÃ  báº¯t buá»™c",r.confirmPassword?r.password!==r.confirmPassword&&(a.confirmPassword="Máº­t kháº©u xÃ¡c nháº­n khÃ´ng khá»›p"):a.confirmPassword="XÃ¡c nháº­n máº­t kháº©u lÃ  báº¯t buá»™c",r.full_name.trim()||(a.full_name="Há» vÃ  tÃªn lÃ  báº¯t buá»™c"),f(a),Object.keys(a).length===0},v=async a=>{if(a.preventDefault(),!!k()){g(!0);try{const i={username:r.username.trim(),email:r.email.trim(),password:r.password,full_name:r.full_name.trim(),phone:r.phone.trim()||null,role:r.role,store_id:r.store_id},o=await F.post("/users/register",i);o.success?(m("ÄÄƒng kÃ½ thÃ nh cÃ´ng! Vui lÃ²ng Ä‘Äƒng nháº­p.",{variant:"success"}),x("/login")):m(o.message||"ÄÄƒng kÃ½ tháº¥t báº¡i",{variant:"error"})}catch(i){console.error("Registration error:",i),m(i.response?.data?.message||"Lá»—i káº¿t ná»‘i. Vui lÃ²ng thá»­ láº¡i.",{variant:"error"})}finally{g(!1)}}};return e.jsx(P,{maxWidth:"sm",sx:{py:4},children:e.jsxs(T,{elevation:3,sx:{p:{xs:3,sm:4},borderRadius:3,background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[e.jsxs(u,{sx:{textAlign:"center",mb:4},children:[e.jsx(u,{sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:80,height:80,borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",mb:2},children:e.jsx(I,{sx:{fontSize:40,color:"white"}})}),e.jsx(c,{variant:"h4",fontWeight:"bold",color:"primary.main",gutterBottom:!0,children:"ÄÄƒng kÃ½ tÃ i khoáº£n"}),e.jsx(c,{variant:"body1",color:"text.secondary",children:"Táº¡o tÃ i khoáº£n má»›i cho há»‡ thá»‘ng SmartPOS"})]}),e.jsx(u,{component:"form",onSubmit:v,children:e.jsxs(C,{spacing:3,children:[e.jsx(l,{fullWidth:!0,label:"TÃªn Ä‘Äƒng nháº­p",value:r.username,onChange:t("username"),error:!!s.username,helperText:s.username,disabled:n,required:!0}),e.jsx(l,{fullWidth:!0,type:"email",label:"Email",value:r.email,onChange:t("email"),error:!!s.email,helperText:s.email,disabled:n,required:!0}),e.jsx(l,{fullWidth:!0,label:"Há» vÃ  tÃªn",value:r.full_name,onChange:t("full_name"),error:!!s.full_name,helperText:s.full_name,disabled:n,required:!0}),e.jsx(l,{fullWidth:!0,label:"Sá»‘ Ä‘iá»‡n thoáº¡i",value:r.phone,onChange:t("phone"),disabled:n}),e.jsxs(W,{fullWidth:!0,children:[e.jsx(_,{children:"Vai trÃ²"}),e.jsxs(E,{value:r.role,onChange:t("role"),label:"Vai trÃ²",disabled:n,children:[e.jsx(h,{value:"admin",children:"ğŸ‘‘ Quáº£n trá»‹ viÃªn"}),e.jsx(h,{value:"manager",children:"ğŸ‘” Quáº£n lÃ½"}),e.jsx(h,{value:"cashier",children:"ğŸ’° Thu ngÃ¢n"}),e.jsx(h,{value:"inventory",children:"ğŸ“¦ Kho hÃ ng"})]})]}),e.jsx(l,{fullWidth:!0,type:w?"text":"password",label:"Máº­t kháº©u",value:r.password,onChange:t("password"),error:!!s.password,helperText:s.password,disabled:n,required:!0}),e.jsx(l,{fullWidth:!0,type:j?"text":"password",label:"XÃ¡c nháº­n máº­t kháº©u",value:r.confirmPassword,onChange:t("confirmPassword"),error:!!s.confirmPassword,helperText:s.confirmPassword,disabled:n,required:!0}),e.jsx(q,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:n,sx:{py:1.5,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)"}},children:n?"Äang Ä‘Äƒng kÃ½...":"ÄÄƒng kÃ½"}),e.jsx(M,{sx:{my:2}}),e.jsx(u,{sx:{textAlign:"center"},children:e.jsxs(c,{variant:"body2",color:"text.secondary",children:["ÄÃ£ cÃ³ tÃ i khoáº£n?"," ",e.jsx(D,{to:"/login",style:{color:p.palette.primary.main,textDecoration:"none",fontWeight:600},children:"ÄÄƒng nháº­p ngay"})]})})]})})]})})};export{K as default};
