import{e as w,p as I,j as e,af as U,P as g,$ as j,W as t,T as s,t as p,aj as o,Y as c,Z as d}from"../chunks/mui-core-cd9e8750.js";import{r}from"../chunks/react-vendor-9ee90314.js";import{a as k}from"../chunks/ui-vendor-11834b8a.js";import{u as T}from"../chunks/useApiData-60d9f817.js";import{aW as f,t as z,T as L,a as B,aX as P,a3 as Q}from"../chunks/mui-icons-f0327ae6.js";import"../chunks/utils-vendor-8faa4a85.js";import"../assets/index-fad1ea34.js";import"../chunks/query-vendor-0e167262.js";const K=()=>{const b=w();I(b.breakpoints.down("md")),k();const[x,F]=r.useState(""),[m,R]=r.useState(""),[h,W]=r.useState("");r.useState(!1),r.useState(null),r.useState({username:"",email:"",full_name:"",password:"",role:"user",status:"active"}),r.useState(!1);const y=r.useMemo(()=>{const i={};return x.trim()&&(i.search=x.trim()),m&&(i.role=m),h&&(i.status=h),i},[x,m,h]),{data:n,pagination:u,isLoading:v,error:q,refetch:C,handlePageChange:A,handleLimitChange:D,page:M,limit:_}=T("/users/list",y),l=r.useMemo(()=>{if(!n||n.length===0)return{totalUsers:0,activeUsers:0,adminUsers:0,recentLogins:0};const i=new Date,S=new Date(i.getTime()-24*60*60*1e3);return{totalUsers:u?.total||0,activeUsers:n.filter(a=>a.status==="active").length,adminUsers:n.filter(a=>a.role==="admin").length,recentLogins:n.filter(a=>a.last_login&&new Date(a.last_login)>S).length}},[n,u]);return e.jsxs(U,{maxWidth:"xl",sx:{py:{xs:1,sm:2},px:{xs:1,sm:2,md:3},minHeight:"100vh",bgcolor:"grey.50"},children:[e.jsx(g,{elevation:2,sx:{p:{xs:2,sm:3},mb:3,borderRadius:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"1px solid",borderColor:"divider"},children:e.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",children:[e.jsxs(t,{children:[e.jsxs(s,{variant:"h4",component:"h1",sx:{display:"flex",alignItems:"center",gap:1,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.125rem"},fontWeight:600,mb:1},children:[e.jsx(f,{sx:{fontSize:"inherit"}}),"Quản lý người dùng"]}),e.jsx(s,{variant:"body1",sx:{fontSize:{xs:"0.875rem",sm:"1rem"},opacity:.9},children:"Quản lý tài khoản và phân quyền người dùng hệ thống"})]}),e.jsxs(j,{direction:"row",spacing:1,children:[e.jsx(p,{variant:"outlined",startIcon:e.jsx(z,{}),onClick:C,disabled:v,sx:{color:"white",borderColor:"rgba(255,255,255,0.5)","&:hover":{borderColor:"white",backgroundColor:"rgba(255,255,255,0.1)"}},children:"Làm mới"}),e.jsx(p,{variant:"contained",startIcon:e.jsx(L,{}),onClick:()=>{},sx:{backgroundColor:"rgba(255,255,255,0.2)","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"}},children:"Thêm người dùng"})]})]})}),e.jsxs(o,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{children:e.jsx(d,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(t,{children:[e.jsx(s,{color:"text.secondary",gutterBottom:!0,children:"Tổng người dùng"}),e.jsx(s,{variant:"h4",children:l.totalUsers})]}),e.jsx(f,{color:"primary",sx:{fontSize:40}})]})})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{children:e.jsx(d,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(t,{children:[e.jsx(s,{color:"text.secondary",gutterBottom:!0,children:"Đang hoạt động"}),e.jsx(s,{variant:"h4",children:l.activeUsers})]}),e.jsx(B,{color:"success",sx:{fontSize:40}})]})})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{children:e.jsx(d,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(t,{children:[e.jsx(s,{color:"text.secondary",gutterBottom:!0,children:"Quản trị viên"}),e.jsx(s,{variant:"h4",children:l.adminUsers})]}),e.jsx(P,{color:"error",sx:{fontSize:40}})]})})})}),e.jsx(o,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{children:e.jsx(d,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(t,{children:[e.jsx(s,{color:"text.secondary",gutterBottom:!0,children:"Đăng nhập 24h"}),e.jsx(s,{variant:"h4",children:l.recentLogins})]}),e.jsx(Q,{color:"info",sx:{fontSize:40}})]})})})})]}),e.jsx(g,{sx:{p:2},children:e.jsx(s,{children:"Đang phát triển bảng danh sách người dùng và form quản lý..."})})]})};export{K as default};
